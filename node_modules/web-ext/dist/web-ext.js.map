{"version":3,"sources":["webpack:///webpack/bootstrap 76662ef160971cbc73f7","webpack:///./src/util/logger.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack:///./src/errors.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/extend.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/client-methods.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///external \"path\"","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///external \"mz\"","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///external \"fs\"","webpack:///external \"es6-promisify\"","webpack:///./src/util/manifest.js","webpack:///./src/firefox/remote.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_new-promise-capability.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./src/cmd/build.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./src/util/file-filter.js","webpack:///./src/util/desktop-notifier.js","webpack:///./src/firefox/index.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/tab.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/core-js/library/modules/_species-constructor.js","webpack:///./node_modules/core-js/library/modules/_task.js","webpack:///./node_modules/core-js/library/modules/_perform.js","webpack:///./node_modules/core-js/library/modules/_promise-resolve.js","webpack:///external \"os\"","webpack:///external \"camelcase\"","webpack:///./src/cmd/index.js","webpack:///external \"parse-json\"","webpack:///external \"event-to-promise\"","webpack:///./src/watcher.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./src/util/artifacts.js","webpack:///./src/firefox/preferences.js","webpack:///external \"events\"","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/jsobject.js","webpack:///external \"js-select\"","webpack:///external \"net\"","webpack:///external \"readline\"","webpack:///external \"tty\"","webpack:///./src/util/temp-dir.js","webpack:///./src/main.js","webpack:///./src/program.js","webpack:///external \"regenerator-runtime\"","webpack:///./node_modules/babel-runtime/helpers/toConsumableArray.js","webpack:///./node_modules/babel-runtime/core-js/array/from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/babel-runtime/core-js/promise.js","webpack:///./node_modules/core-js/library/fn/promise.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/modules/es6.promise.js","webpack:///./node_modules/core-js/library/modules/_an-instance.js","webpack:///./node_modules/core-js/library/modules/_for-of.js","webpack:///./node_modules/core-js/library/modules/_invoke.js","webpack:///./node_modules/core-js/library/modules/_microtask.js","webpack:///./node_modules/core-js/library/modules/_user-agent.js","webpack:///./node_modules/core-js/library/modules/_redefine-all.js","webpack:///./node_modules/core-js/library/modules/_set-species.js","webpack:///./node_modules/core-js/library/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/library/modules/es7.promise.try.js","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///external \"git-rev-sync\"","webpack:///external \"yargs\"","webpack:///external \"watchpack\"","webpack:///external \"debounce\"","webpack:///external \"bunyan\"","webpack:///./src/util/zip-dir.js","webpack:///external \"zip-dir\"","webpack:///external \"strip-json-comments\"","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///external \"es6-error\"","webpack:///external \"mkdirp\"","webpack:///external \"multimatch\"","webpack:///./src/cmd/lint.js","webpack:///external \"addons-linter\"","webpack:///./src/cmd/run.js","webpack:///external \"node-notifier\"","webpack:///external \"fx-runner\"","webpack:///external \"firefox-profile\"","webpack:///./src/util/is-directory.js","webpack:///./node_modules/@cliqz-oss/node-firefox-connect/index.js","webpack:///external \"es6-promise\"","webpack:///./node_modules/@cliqz-oss/firefox-client/index.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/browser.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/client.js","webpack:///external \"colors\"","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/console.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/memory.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/dom.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/domnode.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/network.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/stylesheets.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/webapps.js","webpack:///external \"child_process\"","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/device.js","webpack:///./node_modules/@cliqz-oss/firefox-client/lib/simulator.js","webpack:///./src/extension-runners/index.js","webpack:///./src/extension-runners/firefox-desktop.js","webpack:///./src/extension-runners/firefox-android.js","webpack:///external \"tmp\"","webpack:///./src/util/adb.js","webpack:///external \"adbkit\"","webpack:///./src/cmd/sign.js","webpack:///external \"sign-addon\"","webpack:///./src/cmd/docs.js","webpack:///external \"opn\"","webpack:///./src/util/updates.js","webpack:///external \"update-notifier\"","webpack:///./src/config.js","webpack:///external \"require-uncached\"","webpack:///external \"decamelize\"","webpack:///./src/util/file-exists.js"],"names":["createLogger","ConsoleStream","verbose","isCapturing","capturedMessages","name","msg","level","prefix","packet","localProcess","process","thisLevel","TRACE","INFO","format","push","stdout","write","consoleStream","filename","createBunyanLog","replace","streams","type","stream","onlyInstancesOf","onlyErrorsWithCode","isErrorWithCode","WebExtError","message","UsageError","InvalidManifest","RemoteTempInstallNotSupported","MultiExtensionsReloadError","errorsMap","errors","sourceDir","error","String","errorsBySourceDir","predicate","errorHandler","codeWanted","throwError","Array","isArray","indexOf","code","errno","getManifestId","log","__filename","manifestFile","join","debug","manifestContents","readFile","manifestData","toString","version","applications","gecko","length","getValidatedManifest","id","undefined","port","REMOTE_PORT","connectToFirefox","client","RemoteFirefox","connect","maxRetries","retryInterval","retries","Promise","resolve","setTimeout","lastError","stack","establishConnection","connectWithMaxRetries","checkedForAddonReloading","on","info","JSON","stringify","disconnect","addon","request","reject","makeRequest","to","actor","response","addonPath","tabsResponse","addonsActor","installResponse","addonId","addons","then","map","a","addonRequest","requestTypes","supportedRequestTypes","getInstalledAddon","checkForAddonReloading","Date","toTimeString","messageFile","messageData","messageContents","extensionName","match","messageName","getDefaultLocalizedName","fileFilter","artifactsDir","overwriteDest","showReadyMessage","eventToPromise","filter","wantFile","buffer","default_locale","packageName","safeFileName","extensionPath","flags","end","defaultPackageCreator","toLowerCase","asNeeded","ignoreFiles","createFileFilter","onSourceChange","packageCreator","rebuildAsNeeded","createPackage","result","onChange","catch","shouldWatchFile","build","isSubPath","src","target","relate","relative","startsWith","sep","FileFilter","baseIgnoredPatterns","filesToIgnore","addToIgnoreList","file","resolvedPath","files","charAt","resolvedFile","resolveWithSourceDir","substr","filePath","matches","params","showDesktopNotification","defaultLog","title","icon","notifier","notify","err","res","portToTry","retriesLeft","defaultRemotePortFinder","profile","fxRunner","findRemotePort","firefoxBinary","binaryArgs","path","remotePort","env","defaultFirefoxEnv","results","firefox","binary","args","stderr","data","trim","debuggerPort","run","profilePathOrName","ProfileFinder","Finder","fsStat","stat","DEFAULT_PROFILES_NAMES","includes","baseProfileDir","locateUserDirectory","profilesIniPath","finder","readProfiles","normalizedProfileDirPath","normalize","profiles","Name","Default","profileFullPath","IsRelative","Path","isDefaultProfile","profilePath","app","configureThisProfile","configureProfile","isFirefoxDefaultProfile","customPrefs","isForbiddenProfile","destinationDirectory","useProfile","createProfile","profileDirectory","copyFromUserProfile","copy","copyByName","dirExists","copyProfile","asProxy","extensionsDir","mkdir","isDir","destPath","writeStream","createWriteStream","readStream","createReadStream","pipe","all","installExtension","XPCOM_DEBUG_BREAK","NS_TRACE_MALLOC_DISABLE_STACKS","getPrefs","prefs","Object","keys","forEach","pref","setPreference","customPrefsStr","custom","updatePreferences","options","require","runCommand","default","lint","sign","docs","proxyFileChanges","watcher","executeImmediately","watch","now","close","asyncMkdirp","defaultAsyncMkdirp","stats","isDirectory","access","W_OK","prepareArtifactsDir","coerceCLICustomPreference","nonOverridablePreferences","prefsCommon","prefsFennec","prefsFirefox","common","fennec","appPrefs","cliPrefs","prefsAry","split","key","value","slice","test","parseInt","warn","withTempDir","makePromise","tmpDir","TempDir","create","successHandler","_path","_removeTempDir","createTempDir","dir","multiArgs","unsafeCleanup","tmpPath","removeTempDir","Error","remove","promiseResult","logger","util","main","cmd","defaultVersionGetter","envPrefix","Program","argv","absolutePackageDir","cwd","yargsInstance","verboseEnabled","shouldExitProgram","yargs","strict","commands","description","executor","commandOptions","command","yargsForCmd","demandCommand","exitProcess","global","demand","logStream","makeVerbose","checkForUpdates","systemProcess","getVersion","applyConfigToArgv","discoverConfigFiles","loadJSConfigFile","globalEnv","_","enableVerboseMode","adjustedArgv","configFiles","configDiscovery","discoveredConfigs","config","niceFileList","f","homedir","configFileName","configObject","argvFromCLI","exit","packageData","parse","branch","long","runOptions","program","usage","help","alias","setGlobalOptions","describe","requiresArg","coerce","choices","execute","zipDir","boring","metadata","output","pretty","selfHosted","warningsAsErrors","createLinter","linter","logLevel","Boolean","shouldScanFile","fileName","runAsBinary","defaultFirefoxApp","browserConsole","firefoxProfile","keepProfileChanges","noInput","noReload","preInstall","startUrl","adbBin","adbHost","adbPort","adbDevice","firefoxApk","buildExtension","desktopNotifications","firefoxApp","firefoxClient","reloadStrategy","MultiExtensionRunner","runners","commonRunnerParams","extensions","firefoxDesktopRunnerParams","firefoxDesktopRunner","firefoxAndroidRunnerParams","buildSourceDir","extensionSourceDir","tmpArtifactsDir","firefoxAndroidRunner","extensionRunner","FirefoxDesktopExtensionRunner","FirefoxAndroidExtensionRunner","createExtensionRunner","defaultWatcherCreator","defaultReloadStrategy","extensionRunners","promises","runner","reloadPromise","reloadAllExtensions","runnerName","getName","reloadError","handleReloadResults","reloadExtensionBySourceDir","cleanupCallback","registerCleanup","reloadExtension","createWatcher","stdin","kill","allowInput","watchedSourceDir","pause","ReadStream","isTTY","emitKeypressEvents","setRawMode","keypressUsageInfo","userExit","once","str","keyPressed","ctrl","pid","reloadableExtensions","Map","cleanupCallbacks","Set","setupProfileDir","startFirefoxInstance","reloadErrors","set","size","get","remoteFirefox","reloadAddon","fn","add","runningInfo","extension","urls","url","cleanupCb","installTemporaryAddon","installResult","adbExtensionsPathBySourceDir","printIgnoredParamsWarnings","ADBUtils","adbUtils","adbDevicesDiscoveryAndSelect","apkPackagesDiscoveryAndSelect","adbCheckRuntimePermissions","adbForceStopSelectedPackage","adbPrepareProfileDir","adbStartSelectedPackage","buildAndPushExtensions","adbDiscoveryAndForwardRDPUnixSocket","rdpInstallExtensions","buildAndPushExtension","selectedAdbDevice","selectedArtifactsDir","exiting","clearArtifactsDir","devices","discoverDevices","devicesMsg","dev","foundDevices","device","discoverInstalledFirefoxAPKs","packages","pkgsListMsg","pkgs","pkg","selectedFirefoxApk","filteredPackages","line","pkgsList","amForceStopAPK","getAndroidVersionNumber","androidVersion","Number","isNaN","ensureRequiredAPKRuntimePermissions","getOrCreateArtifactsDir","deviceProfileDir","getDeviceProfileDir","runShellCommand","pushFile","profileDir","startFirefoxAPK","extFileName","basename","adbExtensionPath","firefoxAndroidTimeout","unixSocketDiscoveryRetryInterval","unixSocketDiscoveryMaxTime","handleCtrlC","setUserAbortDiscovery","discoverRDPUnixSocket","maxDiscoveryTime","selectedRDPSocketFile","removeListener","chooseLocalTcpPort","tcpPort","setupForward","selectedTCPPort","srv","createServer","listen","freeTcpPort","address","asyncFn","wrapADBCall","adb","adbClient","createClient","bin","host","artifactsDirMap","userAbortDiscovery","deviceId","shell","readAll","listDevices","pmList","androidVersionNumber","apk","permissions","permissionsMap","perm","pmDumpLogs","testDirOut","delete","localPath","devicePath","transfer","startActivity","wait","action","component","extras","rdpUnixSockets","discoveryStartedAt","endsWith","pop","remote","local","forward","extensionIdFile","content","lines","getIdFromSourceDir","writeFile","saveIdToSourceDir","apiKey","apiProxy","apiSecret","apiUrlPrefix","timeout","preValidatedManifest","signAddon","buildResult","idFromSourceDir","manifestId","xpiPath","downloadDir","signingResult","success","openUrl","updateNotifier","updateCheckInterval","getHomeDir","magicConfigName","possibleConfigs","resolvedFileName","configs","existingConfigs","newArgv","option","decamelizedOptName","expectedType","optionType","defaultValue","wasValueSetOnCLI","resolvedFilePath","webExt","fileIsReadable","constants","R_OK","isFile","fileExists"],"mappings":"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LD,MAKO,IAAIN,MAAMU,IAAN,KAAeL,UAAf,IAA6BL,MAAMW,KAAN,KAAgBN,UAAjD,EAA6D;AAClEC,mBAAa,KAAb;AACD;;AAED,QAAIA,UAAJ,EAAgB;AACd,YAAMN,KAAN;AACD;;AAED,WAAOI,aAAaJ,KAAb,CAAP;AACD,GAjBD;AAkBD;;AAEM,SAASV,eAAT,CACLe,UADK,EAELL,KAFK,EAGI;AACT,MAAIO,MAAMC,OAAN,CAAcH,UAAd,KAA6BA,WAAWI,OAAX,CAAmBT,MAAMU,IAAzB,MAAmC,CAAC,CAArE,EAAwE;AACtE,WAAO,IAAP;AACD,GAFD,MAEO,IAAIV,MAAMU,IAAN,KAAeL,UAAnB,EAA+B;AACpC,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,C;;;;;;AC9ID;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;ACLzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACVA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG,IAAI;AACP,C;;;;;;ACXA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA,cAAc,OAAO;AACrB;AACA,cAAc,SAAS;AACvB;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,+B;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;;;;;;;ACJA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,E;;;;;;ACRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;;ACfA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;AC1BD;AACA;AACA;;;;;;;ACFA;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;ACHD,iC;;;;;;ACAA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACPA,uBAAuB;AACvB;AACA;AACA;;;;;;;ACHA,+B;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACLA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACj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ACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,gCAAgC,WAAW;AAC3C;AACA,CAAC;;;;;;;;ACtFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACpEA;AACA,qEAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACPA;AACA;;AAEA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA,iCAAiC,SAAS,EAAE;AAC5C,CAAC,YAAY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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OAAR,CAAgBtD,kBAAhB,EAAoC4C,UAApC,CAAP;AACD,C;;;;;;;ACljBD,gD;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,E;;;;;;ACpBA,kBAAkB,wD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChBA;AACA;AACA;AACA;AACA;;AAEA;AACA,4FAAkF,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0EAA4E,kBAAkB,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gCAAgC;AACvF;AACA;AACA,KAAK;AACL;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACpCD;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACPA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACjCA,8BAA8B;;;;;;;ACA9B;AACA,UAAU;AACV;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;AC7RD;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA,GAAG,4CAA4C,gCAAgC;AAC/E;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;ACpEA;AACA;;AAEA;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC,GAAG;AACH;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;ACnBH;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;ACXH,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;;AAEA,0CAA0C,mCAAsC;;;;;;;;ACHhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,EAAE;AAChD,mBAAmB,sCAAsC;AACzD,CAAC,qCAAqC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACjCD,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,qEAAuE,4CAA4C;;;;;;;ACFnH,yC;;;;;;ACAA,kC;;;;;;ACAA,sC;;;;;;ACAA,qC;;;;;;ACAA,mC;;;;;;;;;;;;;;ACCA;;;;AACA;;;;;;AAEO,IAAMW,0BAAS,6CAAf,C;;;;;;ACJP,oC;;;;;;ACAA,gD;;;;;;ACAA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;AChBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;;;;;;;ACFA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACdA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA;;;;;;;ACAA;;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;A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AA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;AC1HD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,qDAAqD;AACrD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACtPD,mC;;;;;;ACAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wBAAwB;AAC5D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;AC1GD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;ACfD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA,sCAAsC,mBAAmB;AACzD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,yCAAyC,+BAA+B;AACxE,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA,2CAA2C;;AAE3C;AACA;AACA;;AAEA,0CAA0C;;;;;;;AChH1C;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,sCAAsC,sBAAsB;AAC5D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,uCAAuC,qBAAqB;AAC5D;AACA,GAAG;;AAEH;AACA,0CAA0C,qBAAqB;AAC/D;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;;;;AC5KD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,wBAAwB;AAC5D,GAAG;;AAEH;AACA,mCAAmC,wBAAwB;AAC3D,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA,qCAAqC,mBAAmB;AACxD;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;ACpGD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA,mCAAmC,aAAa;AAChD;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA,4BAA4B,+BAA+B;AAC3D,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;ACxHD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,4BAA4B,yBAAyB;AACrD,GAAG;AACH;AACA,2BAA2B,yBAAyB;AACpD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,iCAAiC,yBAAyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;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","file":"web-ext.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 93);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 76662ef160971cbc73f7","/* @flow */\nimport bunyan, {nameFromLevel, createLogger as defaultLogCreator}\n  from 'bunyan';\n\n\n// Bunyan-related Flow types\n\nexport type TRACE = 10;\nexport type DEBUG = 20;\nexport type INFO = 30;\nexport type WARN = 40;\nexport type ERROR = 50;\nexport type FATAL = 60;\n\nexport type BunyanLogLevel =\n  TRACE | DEBUG | INFO | WARN | ERROR | FATAL;\n\nexport type BunyanLogEntry = {|\n  name: string,\n  msg: string,\n  level: BunyanLogLevel,\n|};\n\nexport type Logger = {\n  debug: (msg: string, ...args: any) => void,\n  error: (msg: string, ...args: any) => void,\n  info: (msg: string, ...args: any) => void,\n  warn: (msg: string, ...args: any) => void,\n};\n\n\n// ConsoleStream types and implementation.\n\nexport type ConsoleStreamParams = {|\n  verbose?: boolean,\n|};\n\nexport type ConsoleOptions = {|\n  localProcess?: typeof process,\n|};\n\nexport class ConsoleStream {\n  verbose: boolean;\n  isCapturing: boolean;\n  capturedMessages: Array<string>;\n\n  constructor({verbose = false}: ConsoleStreamParams = {}) {\n    this.verbose = verbose;\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  format({name, msg, level}: BunyanLogEntry): string {\n    const prefix = this.verbose ? `[${name}][${nameFromLevel[level]}] ` : '';\n    return `${prefix}${msg}\\n`;\n  }\n\n  makeVerbose() {\n    this.verbose = true;\n  }\n\n  write(\n    packet: BunyanLogEntry,\n    {localProcess = process}: ConsoleOptions = {}\n  ): void {\n    const thisLevel: BunyanLogLevel = this.verbose ? bunyan.TRACE : bunyan.INFO;\n    if (packet.level >= thisLevel) {\n      const msg = this.format(packet);\n      if (this.isCapturing) {\n        this.capturedMessages.push(msg);\n      } else {\n        localProcess.stdout.write(msg);\n      }\n    }\n  }\n\n  startCapturing() {\n    this.isCapturing = true;\n  }\n\n  stopCapturing() {\n    this.isCapturing = false;\n    this.capturedMessages = [];\n  }\n\n  flushCapturedLogs({localProcess = process}: ConsoleOptions = {}) {\n    for (const msg of this.capturedMessages) {\n      localProcess.stdout.write(msg);\n    }\n    this.capturedMessages = [];\n  }\n}\n\nexport const consoleStream = new ConsoleStream();\n\n\n// createLogger types and implementation.\n\nexport type BunyanStreamConfig = {|\n  type: string,\n  stream: ConsoleStream,\n|};\n\nexport type CreateBunyanLogParams = {|\n  name: string,\n  level: BunyanLogLevel,\n  streams: Array<BunyanStreamConfig>,\n|};\n\nexport type CreateBunyanLogFn = (params: CreateBunyanLogParams) => Logger;\n\nexport type CreateLoggerOptions = {|\n  createBunyanLog: CreateBunyanLogFn,\n|};\n\nexport function createLogger(\n  filename: string,\n  {createBunyanLog = defaultLogCreator}: CreateLoggerOptions = {}\n): Logger {\n  return createBunyanLog({\n    // Strip the leading src/ from file names (which is in all file names) to\n    // make the name less redundant.\n    name: filename.replace(/^src\\//, ''),\n    // Capture all log levels and let the stream filter them.\n    level: bunyan.TRACE,\n    streams: [{\n      type: 'raw',\n      stream: consoleStream,\n    }],\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/logger.js","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 2\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/asyncToGenerator.js\n// module id = 3\n// module chunks = 0","/* @flow */\nimport ExtendableError from 'es6-error';\n\n\n/*\n * Base error for all custom web-ext errors.\n */\nexport class WebExtError extends ExtendableError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The class for errors that can be fixed by the developer.\n */\nexport class UsageError extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The manifest for the extension is invalid (or missing).\n */\nexport class InvalidManifest extends UsageError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n\n/*\n * The remote Firefox does not support temporary add-on installation.\n */\nexport class RemoteTempInstallNotSupported extends WebExtError {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\n/*\n * The errors collected when reloading all extensions at once\n * (initialized from a map of errors by extensionSourceDir string).\n */\nexport class MultiExtensionsReloadError extends WebExtError {\n  constructor(errorsMap: Map<string, Error>) {\n    let errors = '';\n    for (const [sourceDir, error] of errorsMap) {\n      const msg = String(error);\n      errors += `\\nError on extension loaded from ${sourceDir}: ${msg}\\n`;\n    }\n    const message = `Reload errors: ${errors}`;\n\n    super(message);\n    this.errorsBySourceDir = errorsMap;\n  }\n}\n\n/*\n * Sugar-y way to catch only instances of a certain error.\n *\n * Usage:\n *\n *  Promise.reject(SyntaxError)\n *    .catch(onlyInstancesOf(SyntaxError, (error) => {\n *      // error is guaranteed to be an instance of SyntaxError\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyInstancesOf(\n  predicate: Function, errorHandler: Function\n): Function {\n  return (error) => {\n    if (error instanceof predicate) {\n      return errorHandler(error);\n    } else {\n      throw error;\n    }\n  };\n}\n\n\n/*\n * Sugar-y way to catch only errors having certain code(s).\n *\n * Usage:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode('ENOENT', (error) => {\n *      // error.code is guaranteed to be ENOENT\n *    }))\n *\n *  or:\n *\n *  Promise.resolve()\n *    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], (error) => {\n *      // ...\n *    }))\n *\n * All other errors will be re-thrown.\n *\n */\nexport function onlyErrorsWithCode(\n  codeWanted: (string | number) | Array<string | number>,\n  errorHandler: Function\n): Function {\n  return (error) => {\n    let throwError = true;\n\n    if (Array.isArray(codeWanted)) {\n      if (codeWanted.indexOf(error.code) !== -1 ||\n          codeWanted.indexOf(error.errno) !== -1) {\n        throwError = false;\n      }\n    } else if (error.code === codeWanted || error.errno === codeWanted) {\n      throwError = false;\n    }\n\n    if (throwError) {\n      throw error;\n    }\n\n    return errorHandler(error);\n  };\n}\n\nexport function isErrorWithCode(\n  codeWanted: string | Array<string>,\n  error: Object,\n): boolean {\n  if (Array.isArray(codeWanted) && codeWanted.indexOf(error.code) !== -1) {\n    return true;\n  } else if (error.code === codeWanted) {\n    return true;\n  }\n\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 5\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 6\n// module chunks = 0","module.exports = function extend(prototype, properties) {\n  return Object.create(prototype, getOwnPropertyDescriptors(properties));\n}\n\nfunction getOwnPropertyDescriptors(object) {\n  var names = Object.getOwnPropertyNames(object);\n\n  return names.reduce(function(descriptor, name) {\n    descriptor[name] = Object.getOwnPropertyDescriptor(object, name);\n    return descriptor;\n  }, {});\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/extend.js\n// module id = 7\n// module chunks = 0","var events = require(\"events\"),\n    extend = require(\"./extend\");\n\n// to be instantiated later - to avoid circular dep resolution\nvar JSObject;\n\nvar ClientMethods = extend(events.EventEmitter.prototype, {\n  /**\n   * Intialize this client object.\n   *\n   * @param  {object} client\n   *         Client to send requests on.\n   * @param  {string} actor\n   *         Actor id to set as 'from' field on requests\n   */\n  initialize: function(client, actor) {\n    this.client = client;\n    this.actor = actor;\n\n    this.client.on('message', function(message) {\n      if (message.from == this.actor) {\n        this.emit(message.type, message);\n      }\n    }.bind(this));\n  },\n\n  /**\n   * Make request to our actor on the server.\n   *\n   * @param  {string}   type\n   *         Method name of the request\n   * @param  {object}   message\n   *         Optional extra properties (arguments to method)\n   * @param  {Function}   transform\n   *         Optional tranform for response object. Takes response object\n   *         and returns object to send on.\n   * @param  {Function} callback\n   *         Callback to call with (maybe transformed) response\n   */\n  request: function(type, message, transform, callback) {\n    if (typeof message == \"function\") {\n      if (typeof transform == \"function\") {\n        // (type, trans, cb)\n        callback = transform;\n        transform = message;\n      }\n      else {\n        // (type, cb)\n        callback = message;\n      }\n      message = {};\n    }\n    else if (!callback) {\n      if (!message) {\n        // (type)\n        message = {};\n      }\n      // (type, message, cb)\n      callback = transform;\n      transform = null;\n    }\n\n    message.to = this.actor;\n    message.type = type;\n\n    this.client.makeRequest(message, function(resp) {\n      delete resp.from;\n\n      if (resp.error) {\n        var err = new Error(resp.message);\n        err.name = resp.error;\n\n        callback(err);\n        return;\n      }\n\n      if (transform) {\n        resp = transform(resp);\n      }\n\n      if (callback) {\n        callback(null, resp);\n      }\n    });\n  },\n\n  /*\n   * Transform obj response into a JSObject\n   */\n  createJSObject: function(obj) {\n    if (obj == null) {\n      return;\n    }\n    if (!JSObject) {\n      // circular dependencies\n      JSObject = require(\"./jsobject\");\n    }\n    if (obj.type == \"object\") {\n      return new JSObject(this.client, obj);\n    }\n    return obj;\n  },\n\n  /**\n   * Create function that plucks out only one value from an object.\n   * Used as the transform function for some responses.\n   */\n  pluck: function(prop) {\n    return function(obj) {\n      return obj[prop];\n    }\n  }\n})\n\nmodule.exports = ClientMethods;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/client-methods.js\n// module id = 8\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 9\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 10\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 11\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 12\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 13\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 14\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 15\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 16\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 17\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 18\n// module chunks = 0","module.exports = require(\"mz\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mz\"\n// module id = 19\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 20\n// module chunks = 0","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 21\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 22\n// module chunks = 0","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 23\n// module chunks = 0","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 24\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 25\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 26\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 27\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/extends.js\n// module id = 28\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/slicedToArray.js\n// module id = 29\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 30\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 31\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 32\n// module chunks = 0","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 33\n// module chunks = 0","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 34\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 35\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"es6-promisify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promisify\"\n// module id = 37\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\nimport stripJsonComments from 'strip-json-comments';\n\nimport {InvalidManifest} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n\n// getValidatedManifest helper types and implementation\n\nexport type ExtensionManifestApplications = {|\n  gecko: {|\n    id?: string,\n    strict_min_version?: string,\n    strict_max_version?: string,\n    update_url?: string,\n  |},\n|};\n\nexport type ExtensionManifest = {|\n  name: string,\n  version: string,\n  default_locale?: string,\n  applications?: ExtensionManifestApplications,\n|};\n\nexport default async function getValidatedManifest(\n  sourceDir: string\n): Promise<ExtensionManifest> {\n  const manifestFile = path.join(sourceDir, 'manifest.json');\n  log.debug(`Validating manifest at ${manifestFile}`);\n\n  let manifestContents;\n\n  try {\n    manifestContents = await fs.readFile(manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Could not read manifest.json file at ${manifestFile}: ${error}`);\n  }\n\n  let manifestData;\n\n  try {\n    manifestData = parseJSON(stripJsonComments(manifestContents.toString()),\n                             manifestFile);\n  } catch (error) {\n    throw new InvalidManifest(\n      `Error parsing manifest.json at ${manifestFile}: ${error}`);\n  }\n\n  const errors = [];\n  // This is just some basic validation of what web-ext needs, not\n  // what Firefox will need to run the extension.\n  // TODO: integrate with the addons-linter for actual validation.\n  if (!manifestData.name) {\n    errors.push('missing \"name\" property');\n  }\n  if (!manifestData.version) {\n    errors.push('missing \"version\" property');\n  }\n\n  if (manifestData.applications && !manifestData.applications.gecko) {\n    // Since the applications property only applies to gecko, make\n    // sure 'gecko' exists when 'applications' is defined. This should\n    // make introspection of gecko properties easier.\n    errors.push('missing \"applications.gecko\" property');\n  }\n\n  if (errors.length) {\n    throw new InvalidManifest(\n      `Manifest at ${manifestFile} is invalid: ${errors.join('; ')}`);\n  }\n\n  return manifestData;\n}\n\n\nexport function getManifestId(manifestData: ExtensionManifest): string | void {\n  return manifestData.applications ?\n    manifestData.applications.gecko.id : undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/manifest.js","/* @flow */\nimport defaultFirefoxConnector from '@cliqz-oss/node-firefox-connect';\n// RemoteFirefox types and implementation\nimport type FirefoxClient from '@cliqz-oss/firefox-client';\n\nimport {createLogger} from '../util/logger';\nimport {\n  isErrorWithCode,\n  RemoteTempInstallNotSupported,\n  UsageError,\n  WebExtError,\n} from '../errors';\n\nconst log = createLogger(__filename);\n\n// The default port that Firefox's remote debugger will listen on and the\n// client will connect to.\nexport const REMOTE_PORT = 6005;\n\nexport type FirefoxConnectorFn =\n  (port?: number) => Promise<FirefoxClient>;\n\nexport type FirefoxRDPAddonActor = {|\n  id: string,\n  actor: string,\n|};\n\nexport type FirefoxRDPResponseError = {|\n  error: {\n    message: string,\n  },\n|};\n\nexport type FirefoxRDPResponseAddon = {|\n  addon: FirefoxRDPAddonActor,\n|};\n\nexport type FirefoxRDPResponseRequestTypes = {|\n  requestTypes: Array<string>,\n|};\n\n// NOTE: this type aliases Object to catch any other possible response.\nexport type FirefoxRDPResponseAny = Object;\n\nexport type FirefoxRDPResponseMaybe =\n  FirefoxRDPResponseRequestTypes | FirefoxRDPResponseAny;\n\nexport class RemoteFirefox {\n  client: Object;\n  checkedForAddonReloading: boolean;\n\n  constructor(client: FirefoxClient) {\n    this.client = client;\n    this.checkedForAddonReloading = false;\n\n    client.client.on('disconnect', () => {\n      log.debug('Received \"disconnect\" from Firefox client');\n    });\n    client.client.on('end', () => {\n      log.debug('Received \"end\" from Firefox client');\n    });\n    client.client.on('message', (info) => {\n      // These are arbitrary messages that the client library ignores.\n      log.debug(`Received message from client: ${JSON.stringify(info)}`);\n    });\n  }\n\n  disconnect() {\n    this.client.disconnect();\n  }\n\n  addonRequest(\n    addon: FirefoxRDPAddonActor,\n    request: string\n  ): Promise<FirefoxRDPResponseMaybe> {\n    return new Promise((resolve, reject) => {\n      this.client.client.makeRequest(\n        {to: addon.actor, type: request}, (response) => {\n          if (response.error) {\n            const error = `${response.error}: ${response.message}`;\n            log.debug(\n              `Client responded to '${request}' request with error:`, error);\n            reject(new WebExtError(error));\n          } else {\n            resolve(response);\n          }\n        });\n    });\n  }\n\n  installTemporaryAddon(\n    addonPath: string\n  ): Promise<FirefoxRDPResponseAddon> {\n    return new Promise((resolve, reject) => {\n      this.client.request('listTabs', (error, tabsResponse) => {\n        if (error) {\n          return reject(new WebExtError(\n            `Remote Firefox: listTabs() error: ${error}`));\n        }\n        if (!tabsResponse.addonsActor) {\n          log.debug(\n            'listTabs returned a falsey addonsActor: ' +\n            `${tabsResponse.addonsActor}`);\n          return reject(new RemoteTempInstallNotSupported(\n            'This is an older version of Firefox that does not provide an ' +\n            'add-ons actor for remote installation. Try Firefox 49 or ' +\n            'higher.'));\n        }\n\n        this.client.client.makeRequest({\n          to: tabsResponse.addonsActor,\n          type: 'installTemporaryAddon',\n          addonPath,\n        }, (installResponse) => {\n          if (installResponse.error) {\n            return reject(new WebExtError(\n              'installTemporaryAddon: Error: ' +\n              `${installResponse.error}: ${installResponse.message}`));\n          }\n          log.debug(\n            `installTemporaryAddon: ${JSON.stringify(installResponse)}`);\n          log.info(`Installed ${addonPath} as a temporary add-on`);\n          resolve(installResponse);\n        });\n      });\n    });\n  }\n\n  getInstalledAddon(addonId: string): Promise<FirefoxRDPAddonActor> {\n    return new Promise(\n      (resolve, reject) => {\n        this.client.request('listAddons', (error, response) => {\n          if (error) {\n            reject(new WebExtError(\n              `Remote Firefox: listAddons() error: ${error}`));\n          } else {\n            resolve(response.addons);\n          }\n        });\n      })\n      .then((addons) => {\n        for (const addon of addons) {\n          if (addon.id === addonId) {\n            return addon;\n          }\n        }\n        log.debug(\n          `Remote Firefox has these addons: ${addons.map((a) => a.id)}`);\n        throw new WebExtError(\n          'The remote Firefox does not have your extension installed');\n      });\n  }\n\n  async checkForAddonReloading(\n    addon: FirefoxRDPAddonActor\n  ): Promise<FirefoxRDPAddonActor> {\n    if (this.checkedForAddonReloading) {\n      // We only need to check once if reload() is supported.\n      return addon;\n    } else {\n      const response = await this.addonRequest(addon, 'requestTypes');\n\n      if (response.requestTypes.indexOf('reload') === -1) {\n        const supportedRequestTypes = JSON.stringify(response.requestTypes);\n        log.debug(\n          `Remote Firefox only supports: ${supportedRequestTypes}`);\n        throw new UsageError(\n          'This Firefox version does not support add-on reloading. ' +\n          'Re-run with --no-reload');\n      } else {\n        this.checkedForAddonReloading = true;\n        return addon;\n      }\n    }\n  }\n\n  async reloadAddon(addonId: string): Promise<void> {\n    const addon = await this.getInstalledAddon(addonId);\n    await this.checkForAddonReloading(addon);\n    await this.addonRequest(addon, 'reload');\n    process.stdout.write(\n      `\\rLast extension reload: ${(new Date()).toTimeString()}`);\n    log.debug('\\n');\n  }\n}\n\n\n// Connect types and implementation\n\nexport type ConnectOptions = {|\n  connectToFirefox: FirefoxConnectorFn,\n|};\n\nexport async function connect(\n  port: number = REMOTE_PORT,\n  {connectToFirefox = defaultFirefoxConnector}: ConnectOptions = {}\n): Promise<RemoteFirefox> {\n  log.debug(`Connecting to Firefox on port ${port}`);\n  const client = await connectToFirefox(port);\n  log.debug(`Connected to the remote Firefox debugger on port ${port}`);\n  return new RemoteFirefox(client);\n}\n\n\n// ConnectWithMaxRetries types and implementation\n\nexport type ConnectWithMaxRetriesParams = {|\n  maxRetries?: number,\n  retryInterval?: number,\n  port: number,\n|};\n\nexport type ConnectWithMaxRetriesDeps = {|\n  connectToFirefox: typeof connect,\n|};\n\nexport async function connectWithMaxRetries(\n  // A max of 250 will try connecting for 30 seconds.\n  {maxRetries = 250, retryInterval = 120, port}: ConnectWithMaxRetriesParams,\n  {connectToFirefox = connect}: ConnectWithMaxRetriesDeps = {}\n): Promise<RemoteFirefox> {\n  async function establishConnection() {\n    var lastError;\n\n    for (let retries = 0; retries <= maxRetries; retries++) {\n      try {\n        return await connectToFirefox(port);\n      } catch (error) {\n        if (isErrorWithCode('ECONNREFUSED', error)) {\n          // Wait for `retryInterval` ms.\n          await new Promise((resolve) => {\n            setTimeout(resolve, retryInterval);\n          });\n\n          lastError = error;\n          log.debug(\n            `Retrying Firefox (${retries}); connection error: ${error}`);\n        } else {\n          log.error(error.stack);\n          throw error;\n        }\n      }\n    }\n\n    log.debug('Connect to Firefox debugger: too many retries');\n    throw lastError;\n  }\n\n  log.debug('Connecting to the remote Firefox debugger');\n  return establishConnection();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/remote.js","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 40\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 41\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 42\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 43\n// module chunks = 0","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 44\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 45\n// module chunks = 0","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 46\n// module chunks = 0","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 47\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 48\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 49\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 50\n// module chunks = 0","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 51\n// module chunks = 0","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_new-promise-capability.js\n// module id = 52\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 53\n// module chunks = 0","/* @flow */\nimport path from 'path';\nimport {createWriteStream} from 'fs';\n\nimport {fs} from 'mz';\nimport parseJSON from 'parse-json';\nimport defaultEventToPromise from 'event-to-promise';\n\nimport defaultSourceWatcher from '../watcher';\nimport {zipDir} from '../util/zip-dir';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n  FileFilter,\n} from '../util/file-filter';\n// Import flow types.\nimport type {OnSourceChangeFn} from '../watcher';\nimport type {ExtensionManifest} from '../util/manifest';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\nexport function safeFileName(name: string): string {\n  return name.toLowerCase().replace(/[^a-z0-9.-]+/g, '_');\n}\n\n\n// defaultPackageCreator types and implementation.\n\nexport type ExtensionBuildResult = {|\n  extensionPath: string,\n|};\n\nexport type PackageCreatorParams = {|\n  manifestData?: ExtensionManifest,\n  sourceDir: string,\n  fileFilter: FileFilter,\n  artifactsDir: string,\n  overwriteDest: boolean,\n  showReadyMessage: boolean\n|};\n\nexport type LocalizedNameParams = {|\n  messageFile: string,\n  manifestData: ExtensionManifest,\n|}\n\nexport type PackageCreatorOptions = {|\n  eventToPromise: typeof defaultEventToPromise,\n|};\n\n// This defines the _locales/messages.json type. See:\n// https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Internationalization#Providing_localized_strings_in__locales\ntype LocalizedMessageData = {|\n  [messageName: string]: {|\n    description: string,\n    message: string,\n  |},\n|}\n\nexport async function getDefaultLocalizedName(\n  {messageFile, manifestData}: LocalizedNameParams\n): Promise<string> {\n\n  let messageData: LocalizedMessageData;\n  let messageContents: string | Buffer;\n  let extensionName: string = manifestData.name;\n\n  try {\n    messageContents = await fs.readFile(messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error reading messages.json file at ${messageFile}: ${error}`);\n  }\n\n  try {\n    messageData = parseJSON(String(messageContents), messageFile);\n  } catch (error) {\n    throw new UsageError(\n      `Error parsing messages.json ${error}`);\n  }\n\n  extensionName = manifestData.name.replace(\n    /__MSG_([A-Za-z0-9@_]+?)__/g,\n    (match, messageName) => {\n      if (!(messageData[messageName]\n            && messageData[messageName].message)) {\n        const error = new UsageError(\n          `The locale file ${messageFile} ` +\n            `is missing key: ${messageName}`);\n        throw error;\n      } else {\n        return messageData[messageName].message;\n      }\n    });\n  return Promise.resolve(extensionName);\n}\n\nexport type PackageCreatorFn =\n    (params: PackageCreatorParams) => Promise<ExtensionBuildResult>;\n\nexport async function defaultPackageCreator(\n  {\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  }: PackageCreatorParams,\n  {\n    eventToPromise = defaultEventToPromise,\n  }: PackageCreatorOptions = {}\n): Promise<ExtensionBuildResult> {\n  let id;\n  if (manifestData) {\n    id = getManifestId(manifestData);\n    log.debug(`Using manifest id=${id || '[not specified]'}`);\n  } else {\n    manifestData = await getValidatedManifest(sourceDir);\n  }\n\n  const buffer = await zipDir(sourceDir, {\n    filter: (...args) => fileFilter.wantFile(...args),\n  });\n\n  let extensionName: string = manifestData.name;\n\n  if (manifestData.default_locale) {\n    const messageFile = path.join(\n      sourceDir, '_locales',\n      manifestData.default_locale, 'messages.json'\n    );\n    log.debug('Manifest declared default_locale, localizing extension name');\n    extensionName = await getDefaultLocalizedName({\n      messageFile, manifestData,\n    });\n  }\n  const packageName = safeFileName(\n    `${extensionName}-${manifestData.version}.zip`);\n  const extensionPath = path.join(artifactsDir, packageName);\n\n  // Added 'wx' flags to avoid overwriting of existing package.\n  let stream = createWriteStream(extensionPath, {flags: 'wx'});\n\n  stream.write(buffer, () => stream.end());\n\n  try {\n    await eventToPromise(stream, 'close');\n  } catch (error) {\n    if (!isErrorWithCode('EEXIST', error)) {\n      throw error;\n    }\n    if (!overwriteDest) {\n      throw new UsageError(\n        `Extension exists at the destination path: ${extensionPath}\\n` +\n        'Use --overwrite-dest to enable overwriting.');\n    }\n    log.info(`Destination exists, overwriting: ${extensionPath}`);\n    stream = createWriteStream(extensionPath);\n    stream.write(buffer, () => stream.end());\n    await eventToPromise(stream, 'close');\n  }\n\n  if (showReadyMessage) {\n    log.info(`Your web extension is ready: ${extensionPath}`);\n  }\n  return {extensionPath};\n}\n\n\n// Build command types and implementation.\n\nexport type BuildCmdParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  asNeeded?: boolean,\n  overwriteDest?: boolean,\n  ignoreFiles?: Array<string>,\n|};\n\nexport type BuildCmdOptions = {|\n  manifestData?: ExtensionManifest,\n  fileFilter?: FileFilter,\n  onSourceChange?: OnSourceChangeFn,\n  packageCreator?: PackageCreatorFn,\n  showReadyMessage?: boolean,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default async function build(\n  {\n    sourceDir,\n    artifactsDir,\n    asNeeded = false,\n    overwriteDest = false,\n    ignoreFiles = [],\n  }: BuildCmdParams,\n  {\n    manifestData,\n    createFileFilter = defaultFileFilterCreator,\n    fileFilter = createFileFilter({\n      sourceDir,\n      artifactsDir,\n      ignoreFiles,\n    }),\n    onSourceChange = defaultSourceWatcher,\n    packageCreator = defaultPackageCreator,\n    showReadyMessage = true,\n  }: BuildCmdOptions = {}\n): Promise<ExtensionBuildResult> {\n\n  const rebuildAsNeeded = asNeeded; // alias for `build --as-needed`\n  log.info(`Building web extension from ${sourceDir}`);\n\n  const createPackage = () => packageCreator({\n    manifestData,\n    sourceDir,\n    fileFilter,\n    artifactsDir,\n    overwriteDest,\n    showReadyMessage,\n  });\n\n  await prepareArtifactsDir(artifactsDir);\n  const result = await createPackage();\n\n  if (rebuildAsNeeded) {\n    log.info('Rebuilding when files change...');\n    onSourceChange({\n      sourceDir,\n      artifactsDir,\n      onChange: () => {\n        return createPackage().catch((error) => {\n          log.error(error.stack);\n          throw error;\n        });\n      },\n      shouldWatchFile: (...args) => fileFilter.wantFile(...args),\n    });\n  }\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/build.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/typeof.js\n// module id = 55\n// module chunks = 0","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 56\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 57\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport multimatch from 'multimatch';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\n// check if target is a sub directory of src\nexport const isSubPath = (src: string, target: string): boolean => {\n  const relate = path.relative(src, target);\n  // same dir\n  if (!relate) {\n    return false;\n  }\n  if (relate === '..') {\n    return false;\n  }\n  return !relate.startsWith(`..${path.sep}`);\n};\n\n// FileFilter types and implementation.\n\nexport type FileFilterOptions = {|\n  baseIgnoredPatterns?: Array<string>,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  artifactsDir?: string,\n|};\n\n/*\n * Allows or ignores files.\n */\nexport class FileFilter {\n  filesToIgnore: Array<string>;\n  sourceDir: string;\n\n  constructor({\n    baseIgnoredPatterns = [\n      '**/*.xpi',\n      '**/*.zip',\n      '**/.*', // any hidden file and folder\n      '**/.*/**/*', // and the content inside hidden folder\n      '**/node_modules',\n      '**/node_modules/**/*',\n    ],\n    ignoreFiles = [],\n    sourceDir,\n    artifactsDir,\n  }: FileFilterOptions = {}) {\n    sourceDir = path.resolve(sourceDir);\n\n    this.filesToIgnore = [];\n    this.sourceDir = sourceDir;\n\n    this.addToIgnoreList(baseIgnoredPatterns);\n    if (ignoreFiles) {\n      this.addToIgnoreList(ignoreFiles);\n    }\n    if (artifactsDir && isSubPath(sourceDir, artifactsDir)) {\n      artifactsDir = path.resolve(artifactsDir);\n      log.debug(\n        `Ignoring artifacts directory \"${artifactsDir}\" ` +\n        'and all its subdirectories'\n      );\n      this.addToIgnoreList([\n        artifactsDir,\n        path.join(artifactsDir, '**', '*'),\n      ]);\n    }\n  }\n\n  /**\n   *  Resolve relative path to absolute path with sourceDir.\n   */\n  resolveWithSourceDir(file: string): string {\n    const resolvedPath = path.resolve(this.sourceDir, file);\n    log.debug(\n      `Resolved path ${file} with sourceDir ${this.sourceDir} ` +\n      `to ${resolvedPath}`\n    );\n    return resolvedPath;\n  }\n\n  /**\n   *  Insert more files into filesToIgnore array.\n   */\n  addToIgnoreList(files: Array<string>) {\n    for (const file of files) {\n      if (file.charAt(0) === '!') {\n        const resolvedFile = this.resolveWithSourceDir(file.substr(1));\n        this.filesToIgnore.push(`!${resolvedFile}`);\n      } else {\n        this.filesToIgnore.push(this.resolveWithSourceDir(file));\n      }\n    }\n  }\n\n  /*\n   * Returns true if the file is wanted.\n   *\n   * If filePath does not start with a slash, it will be treated as a path\n   * relative to sourceDir when matching it against all configured\n   * ignore-patterns.\n   *\n   * Example: this is called by zipdir as wantFile(filePath) for each\n   * file in the folder that is being archived.\n   */\n  wantFile(filePath: string): boolean {\n    const resolvedPath = this.resolveWithSourceDir(filePath);\n    const matches = multimatch(resolvedPath, this.filesToIgnore);\n    if (matches.length > 0) {\n      log.debug(`FileFilter: ignoring file ${resolvedPath}`);\n      return false;\n    }\n    return true;\n  }\n}\n\n// a helper function to make mocking easier\n\nexport const createFileFilter = (\n  (params: FileFilterOptions): FileFilter => new FileFilter(params)\n);\n\nexport type FileFilterCreatorFn = typeof createFileFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-filter.js","/* @flow */\nimport defaultNotifier from 'node-notifier';\n\nimport {createLogger} from './logger';\nimport type {Logger} from './logger';\n\nconst defaultLog = createLogger(__filename);\n\nexport type DesktopNotificationsParams = {|\n  title: string,\n  message: string,\n  icon?: string,\n|};\n\nexport type DesktopNotificationsOptions = {|\n  notifier?: typeof defaultNotifier,\n  log?: Logger,\n|};\n\nexport function showDesktopNotification(\n  {\n    title, message, icon,\n  }: DesktopNotificationsParams,\n  {\n    notifier = defaultNotifier,\n    log = defaultLog,\n  }: DesktopNotificationsOptions = {}\n): Promise<void> {\n\n  return new Promise((resolve, reject) => {\n    notifier.notify({title, message, icon}, (err, res) => {\n      if (err) {\n        log.debug(`Desktop notifier error: ${err.message},` +\n                 ` response: ${res}`);\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/desktop-notifier.js","/* @flow */\nimport nodeFs from 'fs';\nimport path from 'path';\n\nimport {default as defaultFxRunner} from 'fx-runner';\nimport FirefoxProfile, {copyFromUserProfile as defaultUserProfileCopier}\n  from 'firefox-profile';\nimport {fs} from 'mz';\nimport promisify from 'es6-promisify';\nimport eventToPromise from 'event-to-promise';\n\nimport isDirectory from '../util/is-directory';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {getPrefs as defaultPrefGetter} from './preferences';\nimport {getManifestId} from '../util/manifest';\nimport {createLogger} from '../util/logger';\nimport {connect as defaultFirefoxConnector, REMOTE_PORT} from './remote';\n// Import flow types\nimport type {FirefoxConnectorFn} from './remote';\nimport type {\n  PreferencesAppName,\n  PreferencesGetterFn,\n  FirefoxPreferences,\n} from './preferences';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const defaultFirefoxEnv = {\n  XPCOM_DEBUG_BREAK: 'stack',\n  NS_TRACE_MALLOC_DISABLE_STACKS: '1',\n};\n\n// defaultRemotePortFinder types and implementation.\n\nexport type RemotePortFinderParams = {|\n  portToTry?: number,\n  retriesLeft?: number,\n  connectToFirefox?: FirefoxConnectorFn,\n|};\n\nexport type RemotePortFinderFn =\n  (params?: RemotePortFinderParams) => Promise<number>;\n\nexport async function defaultRemotePortFinder(\n  {\n    portToTry = REMOTE_PORT,\n    retriesLeft = 10,\n    connectToFirefox = defaultFirefoxConnector,\n  }: RemotePortFinderParams = {}\n): Promise<number> {\n  log.debug(`Checking if remote Firefox port ${portToTry} is available`);\n\n  let client;\n\n  while (retriesLeft >= 0) {\n    try {\n      client = await connectToFirefox(portToTry);\n      log.debug(`Remote Firefox port ${portToTry} is in use ` +\n                `(retries remaining: ${retriesLeft})`);\n    } catch (error) {\n      if (isErrorWithCode('ECONNREFUSED', error)) {\n        // The connection was refused so this port is good to use.\n        return portToTry;\n      }\n\n      throw error;\n    }\n\n    client.disconnect();\n    portToTry++;\n    retriesLeft--;\n  }\n\n  throw new WebExtError('Too many retries on port search');\n}\n\n\n// Declare the needed 'fx-runner' module flow types.\n\nexport type FirefoxRunnerParams = {|\n  binary: ?string,\n  profile?: string,\n  'new-instance'?: boolean,\n  'no-remote'?: boolean,\n  'foreground'?: boolean,\n  'listen': number,\n  'binary-args'?: Array<string> | string,\n  'env'?: {\n    [key: string]: string\n  },\n  'verbose'?: boolean,\n|};\n\nexport interface FirefoxProcess extends events$EventEmitter {\n  stderr: events$EventEmitter;\n  stdout: events$EventEmitter;\n  kill: Function;\n}\n\nexport type FirefoxRunnerResults = {|\n  process: FirefoxProcess,\n  binary: string,\n  args: Array<string>,\n|}\n\nexport type FirefoxRunnerFn =\n  (params: FirefoxRunnerParams) => Promise<FirefoxRunnerResults>;\n\n\nexport type FirefoxInfo = {|\n  firefox: FirefoxProcess,\n  debuggerPort: number,\n|}\n\n// Run command types and implementaion.\n\nexport type FirefoxRunOptions = {|\n  fxRunner?: FirefoxRunnerFn,\n  findRemotePort?: RemotePortFinderFn,\n  firefoxBinary?: string,\n  binaryArgs?: Array<string>,\n  args?: Array<any>,\n|};\n\n/*\n * Runs Firefox with the given profile object and resolves a promise on exit.\n */\nexport async function run(\n  profile: FirefoxProfile,\n  {\n    fxRunner = defaultFxRunner,\n    findRemotePort = defaultRemotePortFinder,\n    firefoxBinary, binaryArgs,\n  }: FirefoxRunOptions = {}\n): Promise<FirefoxInfo> {\n\n  log.debug(`Running Firefox with profile at ${profile.path()}`);\n\n  const remotePort = await findRemotePort();\n\n  const results = await fxRunner({\n    // if this is falsey, fxRunner tries to find the default one.\n    'binary': firefoxBinary,\n    'binary-args': binaryArgs,\n    // This ensures a new instance of Firefox is created. It has nothing\n    // to do with the devtools remote debugger.\n    'no-remote': true,\n    'listen': remotePort,\n    'foreground': true,\n    'profile': profile.path(),\n    'env': {\n      ...process.env,\n      ...defaultFirefoxEnv,\n    },\n    'verbose': true,\n  });\n\n  const firefox = results.process;\n\n  log.debug(`Executing Firefox binary: ${results.binary}`);\n  log.debug(`Firefox args: ${results.args.join(' ')}`);\n\n  firefox.on('error', (error) => {\n    // TODO: show a nice error when it can't find Firefox.\n    // if (/No such file/.test(err) || err.code === 'ENOENT') {\n    log.error(`Firefox error: ${error}`);\n    throw error;\n  });\n\n  log.info(\n    'Use --verbose or open Tools > Web Developer > Browser Console ' +\n    'to see logging');\n\n  firefox.stderr.on('data', (data) => {\n    log.debug(`Firefox stderr: ${data.toString().trim()}`);\n  });\n\n  firefox.stdout.on('data', (data) => {\n    log.debug(`Firefox stdout: ${data.toString().trim()}`);\n  });\n\n  firefox.on('close', () => {\n    log.debug('Firefox closed');\n  });\n\n  return { firefox, debuggerPort: remotePort };\n}\n\n\n// isDefaultProfile types and implementation.\n\nconst DEFAULT_PROFILES_NAMES = [\n  'default',\n  'dev-edition-default',\n];\n\nexport type IsDefaultProfileFn = (\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat,\n) => Promise<boolean>;\n\n/*\n * Tests if a profile is a default Firefox profile (both as a profile name or\n * profile path).\n *\n * Returns a promise that resolves to true if the profile is one of default Firefox profile.\n */\nexport async function isDefaultProfile(\n  profilePathOrName: string,\n  ProfileFinder?: typeof FirefoxProfile.Finder = FirefoxProfile.Finder,\n  fsStat?: typeof fs.stat = fs.stat,\n): Promise<boolean> {\n  if (DEFAULT_PROFILES_NAMES.includes(profilePathOrName)) {\n    return true;\n  }\n\n  const baseProfileDir = ProfileFinder.locateUserDirectory();\n  const profilesIniPath = path.join(baseProfileDir, 'profiles.ini');\n  try {\n    await fsStat(profilesIniPath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`profiles.ini not found: ${error}`);\n\n      // No profiles exist yet, default to false (the default profile name contains a\n      // random generated component).\n      return false;\n    }\n\n    // Re-throw any unexpected exception.\n    throw error;\n  }\n\n  // Check for profile dir path.\n  const finder = new ProfileFinder(baseProfileDir);\n  const readProfiles = promisify(finder.readProfiles, finder);\n\n  await readProfiles();\n\n  const normalizedProfileDirPath = path.normalize(\n    path.join(path.resolve(profilePathOrName), path.sep)\n  );\n\n  for (const profile of finder.profiles) {\n    // Check if the profile dir path or name is one of the default profiles\n    // defined in the profiles.ini file.\n    if (DEFAULT_PROFILES_NAMES.includes(profile.Name) ||\n        profile.Default === '1') {\n      let profileFullPath;\n\n      // Check for profile name.\n      if (profile.Name === profilePathOrName) {\n        return true;\n      }\n\n      // Check for profile path.\n      if (profile.IsRelative === '1') {\n        profileFullPath = path.join(baseProfileDir, profile.Path, path.sep);\n      } else {\n        profileFullPath = path.join(profile.Path, path.sep);\n      }\n\n      if (path.normalize(profileFullPath) === normalizedProfileDirPath) {\n        return true;\n      }\n    }\n  }\n\n  // Profile directory not found.\n  return false;\n}\n\n// configureProfile types and implementation.\n\nexport type ConfigureProfileOptions = {|\n  app?: PreferencesAppName,\n  getPrefs?: PreferencesGetterFn,\n  customPrefs?: FirefoxPreferences,\n|};\n\nexport type ConfigureProfileFn = (\n  profile: FirefoxProfile,\n  options?: ConfigureProfileOptions\n) => Promise<FirefoxProfile>;\n\n/*\n * Configures a profile with common preferences that are required to\n * activate extension development.\n *\n * Returns a promise that resolves with the original profile object.\n */\nexport function configureProfile(\n  profile: FirefoxProfile,\n  {\n    app = 'firefox',\n    getPrefs = defaultPrefGetter,\n    customPrefs = {},\n  }: ConfigureProfileOptions = {},\n): Promise<FirefoxProfile> {\n  // Set default preferences. Some of these are required for the add-on to\n  // operate, such as disabling signatures.\n  const prefs = getPrefs(app);\n  Object.keys(prefs).forEach((pref) => {\n    profile.setPreference(pref, prefs[pref]);\n  });\n  if (Object.keys(customPrefs).length > 0) {\n    const customPrefsStr = JSON.stringify(customPrefs, null, 2);\n    log.info(`Setting custom Firefox preferences: ${customPrefsStr}`);\n    Object.keys(customPrefs).forEach((custom) => {\n      profile.setPreference(custom, customPrefs[custom]);\n    });\n  }\n  profile.updatePreferences();\n  return Promise.resolve(profile);\n}\n\n// useProfile types and implementation.\n\nexport type UseProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  isFirefoxDefaultProfile?: IsDefaultProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n// Use the target path as a Firefox profile without cloning it\n\nexport async function useProfile(\n  profilePath: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    isFirefoxDefaultProfile = isDefaultProfile,\n    customPrefs = {},\n  }: UseProfileParams = {},\n): Promise<FirefoxProfile> {\n  const isForbiddenProfile = await isFirefoxDefaultProfile(profilePath);\n  if (isForbiddenProfile) {\n    throw new UsageError(\n      'Cannot use --keep-profile-changes on a default profile' +\n      ` (\"${profilePath}\")` +\n      ' because web-ext will make it insecure and unsuitable for daily use.' +\n      '\\nSee https://github.com/mozilla/web-ext/issues/1005'\n    );\n  }\n  const profile = new FirefoxProfile({destinationDirectory: profilePath});\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// createProfile types and implementation.\n\nexport type CreateProfileParams = {\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  customPrefs?: FirefoxPreferences,\n};\n\n/*\n * Creates a new temporary profile and resolves with the profile object.\n *\n * The profile will be deleted when the system process exits.\n */\nexport async function createProfile(\n  {\n    app,\n    configureThisProfile = configureProfile,\n    customPrefs = {},\n  }: CreateProfileParams = {},\n): Promise<FirefoxProfile> {\n  const profile = new FirefoxProfile();\n  return await configureThisProfile(profile, {app, customPrefs});\n}\n\n\n// copyProfile types and implementation.\n\nexport type CopyProfileOptions = {|\n  app?: PreferencesAppName,\n  configureThisProfile?: ConfigureProfileFn,\n  copyFromUserProfile?: Function,\n  customPrefs?: FirefoxPreferences,\n|};\n\n/*\n * Copies an existing Firefox profile and creates a new temporary profile.\n * The new profile will be configured with some preferences required to\n * activate extension development.\n *\n * It resolves with the new profile object.\n *\n * The temporary profile will be deleted when the system process exits.\n *\n * The existing profile can be specified as a directory path or a name of\n * one that exists in the current user's Firefox directory.\n */\nexport async function copyProfile(\n  profileDirectory: string,\n  {\n    app,\n    configureThisProfile = configureProfile,\n    copyFromUserProfile = defaultUserProfileCopier,\n    customPrefs = {},\n  }: CopyProfileOptions = {},\n): Promise<FirefoxProfile> {\n\n  const copy = promisify(FirefoxProfile.copy);\n  const copyByName = promisify(copyFromUserProfile);\n\n  try {\n    const dirExists = await isDirectory(profileDirectory);\n\n    let profile;\n\n    if (dirExists) {\n      log.debug(`Copying profile directory from \"${profileDirectory}\"`);\n      profile = await copy({profileDirectory});\n    } else {\n      log.debug(`Assuming ${profileDirectory} is a named profile`);\n      profile = await copyByName({name: profileDirectory});\n    }\n\n    return configureThisProfile(profile, {app, customPrefs});\n  } catch (error) {\n    throw new WebExtError(\n      `Could not copy Firefox profile from ${profileDirectory}: ${error}`);\n  }\n}\n\n\n// installExtension types and implementation.\n\nexport type InstallExtensionParams = {|\n  asProxy?: boolean,\n  manifestData: ExtensionManifest,\n  profile: FirefoxProfile,\n  extensionPath: string,\n|};\n\n/*\n * Installs an extension into the given Firefox profile object.\n * Resolves when complete.\n *\n * The extension is copied into a special location and you need to turn\n * on some preferences to allow this. See extensions.autoDisableScopes in\n * ./preferences.js.\n *\n * When asProxy is true, a special proxy file will be installed. This is a\n * text file that contains the path to the extension source.\n */\nexport async function installExtension(\n  {\n    asProxy = false,\n    manifestData,\n    profile,\n    extensionPath,\n  }: InstallExtensionParams): Promise<any> {\n  // This more or less follows\n  // https://github.com/saadtazi/firefox-profile-js/blob/master/lib/firefox_profile.js#L531\n  // (which is broken for web extensions).\n  // TODO: maybe uplift a patch that supports web extensions instead?\n\n  if (!profile.extensionsDir) {\n    throw new WebExtError('profile.extensionsDir was unexpectedly empty');\n  }\n\n  try {\n    await fs.stat(profile.extensionsDir);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`Creating extensions directory: ${profile.extensionsDir}`);\n      await fs.mkdir(profile.extensionsDir);\n    } else {\n      throw error;\n    }\n  }\n\n  const id = getManifestId(manifestData);\n  if (!id) {\n    throw new UsageError(\n      'An explicit extension ID is required when installing to ' +\n      'a profile (applications.gecko.id not found in manifest.json)');\n  }\n\n  if (asProxy) {\n    log.debug(`Installing as an extension proxy; source: ${extensionPath}`);\n\n    const isDir = await isDirectory(extensionPath);\n    if (!isDir) {\n      throw new WebExtError(\n        'proxy install: extensionPath must be the extension source ' +\n        `directory; got: ${extensionPath}`);\n    }\n\n    // Write a special extension proxy file containing the source\n    // directory. See:\n    // https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment#Firefox_extension_proxy_file\n    const destPath = path.join(profile.extensionsDir, `${id}`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n    writeStream.write(extensionPath);\n    writeStream.end();\n    return await eventToPromise(writeStream, 'close');\n  } else {\n    // Write the XPI file to the profile.\n    const readStream = nodeFs.createReadStream(extensionPath);\n    const destPath = path.join(profile.extensionsDir, `${id}.xpi`);\n    const writeStream = nodeFs.createWriteStream(destPath);\n\n    log.debug(`Installing extension from ${extensionPath} to ${destPath}`);\n    readStream.pipe(writeStream);\n\n    return await Promise.all([\n      eventToPromise(readStream, 'close'),\n      eventToPromise(writeStream, 'close'),\n    ]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/index.js","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Console = require(\"./console\"),\n    Memory = require(\"./memory\"),\n    DOM = require(\"./dom\"),\n    Network = require(\"./network\"),\n    StyleSheets = require(\"./stylesheets\");\n\nmodule.exports = Tab;\n\nfunction Tab(client, tab) {\n  this.initialize(client, tab.actor);\n\n  this.tab = tab;\n  this.updateInfo(tab);\n\n  this.on(\"tabNavigated\", this.onTabNavigated.bind(this));\n}\n\nTab.prototype = extend(ClientMethods, {\n  updateInfo: function(form) {\n    this.url = form.url;\n    this.title = form.title;\n  },\n\n  get StyleSheets() {\n    if (!this._StyleSheets) {\n      this._StyleSheets = new StyleSheets(this.client, this.tab.styleSheetsActor);\n    }\n    return this._StyleSheets;\n  },\n\n  get DOM() {\n    if (!this._DOM) {\n      this._DOM = new DOM(this.client, this.tab.inspectorActor);\n    }\n    return this._DOM;\n  },\n\n  get Network() {\n    if (!this._Network) {\n      this._Network = new Network(this.client, this.tab.consoleActor);\n    }\n    return this._Network;\n  },\n\n  get Console() {\n    if (!this._Console) {\n      this._Console = new Console(this.client, this.tab.consoleActor);\n    }\n    return this._Console;\n  },\n\n  get Memory() {\n    if (!this._Memory) {\n      this._Memory = new Memory(this.client, this.tab.memoryActor);\n    }\n    return this._Memory;\n  },\n\n  onTabNavigated: function(event) {\n    if (event.state == \"start\") {\n      this.emit(\"before-navigate\", { url: event.url });\n    }\n    else if (event.state == \"stop\") {\n      this.updateInfo(event);\n\n      this.emit(\"navigate\", { url: event.url, title: event.title });\n    }\n  },\n\n  attach: function(cb) {\n    this.request(\"attach\", cb);\n  },\n\n  detach: function(cb) {\n    this.request(\"detach\", cb);\n  },\n\n  reload: function(cb) {\n    this.request(\"reload\", cb);\n  },\n\n  navigateTo: function(url, cb) {\n    this.request(\"navigateTo\", { url: url }, cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/tab.js\n// module id = 61\n// module chunks = 0","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 62\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 63\n// module chunks = 0","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 64\n// module chunks = 0","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 65\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 66\n// module chunks = 0","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 67\n// module chunks = 0","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 68\n// module chunks = 0","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 69\n// module chunks = 0","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 70\n// module chunks = 0","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_species-constructor.js\n// module id = 72\n// module chunks = 0","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_task.js\n// module id = 73\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_perform.js\n// module id = 74\n// module chunks = 0","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_promise-resolve.js\n// module id = 75\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 76\n// module chunks = 0","module.exports = require(\"camelcase\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"camelcase\"\n// module id = 77\n// module chunks = 0","/* @flow */\n\nimport type {\n  BuildCmdParams, BuildCmdOptions, ExtensionBuildResult,\n} from './build';\nimport type {LintCmdParams, LintCmdOptions} from './lint';\nimport type {CmdRunParams, CmdRunOptions} from './run';\nimport type {MultiExtensionRunner} from '../extension-runners';\nimport type {SignParams, SignOptions, SignResult} from './sign';\nimport type {DocsParams, DocsOptions} from './docs';\n\n// This module exports entry points for all supported commands. For performance\n// reasons (faster start-up), the implementations are not statically imported\n// at the top of the file, but lazily loaded in the (exported) functions.\n// The latter would slow down start-up by several seconds, as seen in #1302 .\n\nasync function build(\n  params: BuildCmdParams, options: BuildCmdOptions\n): Promise<ExtensionBuildResult> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./build');\n  return runCommand(params, options);\n}\n\nasync function lint(\n  params: LintCmdParams, options: LintCmdOptions\n): Promise<void> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./lint');\n  return runCommand(params, options);\n}\n\nasync function run(\n  params: CmdRunParams, options: CmdRunOptions\n): Promise<MultiExtensionRunner> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./run');\n  return runCommand(params, options);\n}\n\nasync function sign(\n  params: SignParams, options: SignOptions\n): Promise<SignResult> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./sign');\n  return runCommand(params, options);\n}\n\nasync function docs(\n  params: DocsParams, options: DocsOptions\n): Promise<void> {\n  // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n  const {default: runCommand} = require('./docs');\n  return runCommand(params, options);\n}\n\nexport default {build, lint, run, sign, docs};\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/index.js","module.exports = require(\"parse-json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"parse-json\"\n// module id = 79\n// module chunks = 0","module.exports = require(\"event-to-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"event-to-promise\"\n// module id = 80\n// module chunks = 0","/* @flow */\nimport Watchpack from 'watchpack';\nimport debounce from 'debounce';\n\nimport {createLogger} from './util/logger';\n\n\nconst log = createLogger(__filename);\n\n\n// onSourceChange types and implementation\n\nexport type ShouldWatchFn = (filePath: string) => boolean;\n\nexport type OnChangeFn = () => any;\n\nexport type OnSourceChangeParams = {|\n  sourceDir: string,\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\n// NOTE: this fix an issue with flow and default exports (which currently\n// lose their type signatures) by explicitly declare the default export\n// signature. Reference: https://github.com/facebook/flow/issues/449\n// eslint-disable-next-line no-shadow\ndeclare function exports(params: OnSourceChangeParams): Watchpack;\n\nexport type OnSourceChangeFn = (params: OnSourceChangeParams) => Watchpack;\n\nexport default function onSourceChange(\n  {sourceDir, artifactsDir, onChange, shouldWatchFile}: OnSourceChangeParams\n): Watchpack {\n  // TODO: For network disks, we would need to add {poll: true}.\n  const watcher = new Watchpack();\n\n  const executeImmediately = true;\n  onChange = debounce(onChange, 1000, executeImmediately);\n\n  watcher.on('change', (filePath) => {\n    proxyFileChanges({artifactsDir, onChange, filePath, shouldWatchFile});\n  });\n\n  log.debug(`Watching for file changes in ${sourceDir}`);\n  watcher.watch([], [sourceDir], Date.now());\n\n  // TODO: support interrupting the watcher on Windows.\n  // https://github.com/mozilla/web-ext/issues/225\n  process.on('SIGINT', () => watcher.close());\n  return watcher;\n}\n\n\n// proxyFileChanges types and implementation.\n\nexport type ProxyFileChangesParams = {|\n  artifactsDir: string,\n  onChange: OnChangeFn,\n  filePath: string,\n  shouldWatchFile: ShouldWatchFn,\n|};\n\nexport function proxyFileChanges(\n  {artifactsDir, onChange, filePath, shouldWatchFile}: ProxyFileChangesParams\n): void {\n  if (filePath.indexOf(artifactsDir) === 0 || !shouldWatchFile(filePath)) {\n    log.debug(`Ignoring change to: ${filePath}`);\n  } else {\n    log.debug(`Changed: ${filePath}`);\n    log.debug(`Last change detection: ${(new Date()).toTimeString()}`);\n    onChange();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/watcher.js","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 82\n// module chunks = 0","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 83\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\nimport mkdirp from 'mkdirp';\nimport promisify from 'es6-promisify';\n\nimport {UsageError, isErrorWithCode} from '../errors';\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\nconst defaultAsyncMkdirp = promisify(mkdirp);\n\ntype PrepareArtifactsDirOptions = {\n  asyncMkdirp?: typeof defaultAsyncMkdirp,\n}\n\nexport async function prepareArtifactsDir(\n  artifactsDir: string,\n  {asyncMkdirp = defaultAsyncMkdirp}: PrepareArtifactsDirOptions = {},\n): Promise<string> {\n  try {\n    const stats = await fs.stat(artifactsDir);\n    if (!stats.isDirectory()) {\n      throw new UsageError(\n        `--artifacts-dir=\"${artifactsDir}\" exists but it is not a directory.`);\n    }\n    // If the artifactsDir already exists, check that we have the write permissions on it.\n    try {\n      await fs.access(artifactsDir, fs.W_OK);\n    } catch (accessErr) {\n      if (isErrorWithCode('EACCES', accessErr)) {\n        throw new UsageError(\n          `--artifacts-dir=\"${artifactsDir}\" exists but the user lacks ` +\n          'permissions on it.');\n      } else {\n        throw accessErr;\n      }\n    }\n  } catch (error) {\n    if (isErrorWithCode('EACCES', error)) {\n      // Handle errors when the artifactsDir cannot be accessed.\n      throw new UsageError(\n        `Cannot access --artifacts-dir=\"${artifactsDir}\" because the user ` +\n        `lacks permissions: ${error}`);\n    } else if (isErrorWithCode('ENOENT', error)) {\n      // Create the artifact dir if it doesn't exist yet.\n      try {\n        log.debug(`Creating artifacts directory: ${artifactsDir}`);\n        await asyncMkdirp(artifactsDir);\n      } catch (mkdirErr) {\n        if (isErrorWithCode('EACCES', mkdirErr)) {\n          // Handle errors when the artifactsDir cannot be created for lack of permissions.\n          throw new UsageError(\n            `Cannot create --artifacts-dir=\"${artifactsDir}\" because the ` +\n            `user lacks permissions: ${mkdirErr}`);\n        } else {\n          throw mkdirErr;\n        }\n      }\n    } else {\n      throw error;\n    }\n  }\n\n  return artifactsDir;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/artifacts.js","/* @flow */\nimport {WebExtError, UsageError} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\nexport const nonOverridablePreferences = [\n  'devtools.debugger.remote-enabled', 'devtools.debugger.prompt-connection',\n  'xpinstall.signatures.required',\n];\n\n// Flow Types\n\nexport type FirefoxPreferences = {\n  [key: string]: boolean | string | number,\n};\n\nexport type PreferencesAppName = 'firefox' | 'fennec';\n\n\n// Preferences Maps\n\nconst prefsCommon: FirefoxPreferences = {\n  // Allow debug output via dump to be printed to the system console\n  'browser.dom.window.dump.enabled': true,\n  // Warn about possibly incorrect code.\n  'javascript.options.strict': true,\n  'javascript.options.showInConsole': true,\n\n  // Allow remote connections to the debugger.\n  'devtools.debugger.remote-enabled': true,\n  // Disable the prompt for allowing connections.\n  'devtools.debugger.prompt-connection': false,\n\n  // Turn off platform logging because it is a lot of info.\n  'extensions.logging.enabled': false,\n\n  // Disable extension updates and notifications.\n  'extensions.checkCompatibility.nightly': false,\n  'extensions.update.enabled': false,\n  'extensions.update.notifyUser': false,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l372\n  // Only load extensions from the application and user profile.\n  // AddonManager.SCOPE_PROFILE + AddonManager.SCOPE_APPLICATION\n  'extensions.enabledScopes': 5,\n  // Disable metadata caching for installed add-ons by default.\n  'extensions.getAddons.cache.enabled': false,\n  // Disable intalling any distribution add-ons.\n  'extensions.installDistroAddons': false,\n  // Allow installing extensions dropped into the profile folder.\n  'extensions.autoDisableScopes': 10,\n\n  // Disable app update.\n  'app.update.enabled': false,\n\n  // Allow unsigned add-ons.\n  'xpinstall.signatures.required': false,\n};\n\n// Prefs specific to Firefox for Android.\nconst prefsFennec: FirefoxPreferences = {\n  'browser.console.showInPanel': true,\n  'browser.firstrun.show.uidiscovery': false,\n  'devtools.remote.usb.enabled': true,\n};\n\n// Prefs specific to Firefox for desktop.\nconst prefsFirefox: FirefoxPreferences = {\n  'browser.startup.homepage': 'about:blank',\n  'startup.homepage_welcome_url': 'about:blank',\n  'startup.homepage_welcome_url.additional': '',\n  'devtools.errorconsole.enabled': true,\n  'devtools.chrome.enabled': true,\n\n  // From:\n  // http://hg.mozilla.org/mozilla-central/file/1dd81c324ac7/build/automation.py.in//l388\n  // Make url-classifier updates so rare that they won't affect tests.\n  'urlclassifier.updateinterval': 172800,\n  // Point the url-classifier to a nonexistent local URL for fast failures.\n  'browser.safebrowsing.provider.0.gethashURL':\n    'http://localhost/safebrowsing-dummy/gethash',\n  'browser.safebrowsing.provider.0.keyURL':\n    'http://localhost/safebrowsing-dummy/newkey',\n  'browser.safebrowsing.provider.0.updateURL':\n    'http://localhost/safebrowsing-dummy/update',\n\n  // Disable self repair/SHIELD\n  'browser.selfsupport.url': 'https://localhost/selfrepair',\n  // Disable Reader Mode UI tour\n  'browser.reader.detectedFirstArticle': true,\n\n  // Set the policy firstURL to an empty string to prevent\n  // the privacy info page to be opened on every \"web-ext run\".\n  // (See #1114 for rationale)\n  'datareporting.policy.firstRunURL': '',\n};\n\nconst prefs = {\n  common: prefsCommon,\n  fennec: prefsFennec,\n  firefox: prefsFirefox,\n};\n\n\n// Module exports\n\nexport type PreferencesGetterFn =\n  (appName: PreferencesAppName) => FirefoxPreferences;\n\nexport function getPrefs(\n  app: PreferencesAppName = 'firefox'\n): FirefoxPreferences {\n  const appPrefs = prefs[app];\n  if (!appPrefs) {\n    throw new WebExtError(`Unsupported application: ${app}`);\n  }\n  return {\n    ...prefsCommon,\n    ...appPrefs,\n  };\n}\n\nexport function coerceCLICustomPreference(\n  cliPrefs: Array<string>\n): FirefoxPreferences {\n  const customPrefs = {};\n\n  for (const pref of cliPrefs) {\n    const prefsAry = pref.split('=');\n\n    if (prefsAry.length < 2) {\n      throw new UsageError(\n        `Incomplete custom preference: \"${pref}\". ` +\n        'Syntax expected: \"prefname=prefvalue\".'\n      );\n    }\n\n    const key = prefsAry[0];\n    let value = prefsAry.slice(1).join('=');\n\n    if (/[^\\w{@}.-]/.test(key)) {\n      throw new UsageError(`Invalid custom preference name: ${key}`);\n    }\n\n    if (value === `${parseInt(value)}`) {\n      value = parseInt(value, 10);\n    } else if (value === 'true' || value === 'false') {\n      value = (value === 'true');\n    }\n\n    if (nonOverridablePreferences.includes(key)) {\n      log.warn(`'${key}' preference cannot be customized.`);\n      continue;\n    }\n    customPrefs[`${key}`] = value;\n  }\n\n  return customPrefs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/firefox/preferences.js","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 86\n// module chunks = 0","var select = require(\"js-select\"),\n    extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = JSObject;\n\nfunction JSObject(client, obj) {\n  this.initialize(client, obj.actor);\n  this.obj = obj;\n}\n\nJSObject.prototype = extend(ClientMethods, {\n  type: \"object\",\n\n  get class() {\n    return this.obj.class;\n  },\n\n  get name() {\n    return this.obj.name;\n  },\n\n  get displayName() {\n    return this.obj.displayName;\n  },\n\n  ownPropertyNames: function(cb) {\n    this.request('ownPropertyNames', function(resp) {\n      return resp.ownPropertyNames;\n    }, cb);\n  },\n\n  ownPropertyDescriptor: function(name, cb) {\n    this.request('property', { name: name }, function(resp) {\n      return this.transformDescriptor(resp.descriptor);\n    }.bind(this), cb);\n  },\n\n  ownProperties: function(cb) {\n    this.request('prototypeAndProperties', function(resp) {\n      return this.transformProperties(resp.ownProperties);\n    }.bind(this), cb);\n  },\n\n  prototype: function(cb) {\n    this.request('prototype', function(resp) {\n      return this.createJSObject(resp.prototype);\n    }.bind(this), cb);\n  },\n\n  ownPropertiesAndPrototype: function(cb) {\n    this.request('prototypeAndProperties', function(resp) {\n      resp.ownProperties = this.transformProperties(resp.ownProperties);\n      resp.safeGetterValues = this.transformGetters(resp.safeGetterValues);\n      resp.prototype = this.createJSObject(resp.prototype);\n\n      return resp;\n    }.bind(this), cb);\n  },\n\n  /* helpers */\n  transformProperties: function(props) {\n    var transformed = {};\n    for (var prop in props) {\n      transformed[prop] = this.transformDescriptor(props[prop]);\n    }\n    return transformed;\n  },\n\n  transformGetters: function(getters) {\n    var transformed = {};\n    for (var prop in getters) {\n      transformed[prop] = this.transformGetter(getters[prop]);\n    }\n    return transformed;\n  },\n\n  transformDescriptor: function(descriptor) {\n    descriptor.value = this.createJSObject(descriptor.value);\n    return descriptor;\n  },\n\n  transformGetter: function(getter) {\n    return {\n      value: this.createJSObject(getter.getterValue),\n      prototypeLevel: getter.getterPrototypeLevel,\n      enumerable: getter.enumerable,\n      writable: getter.writable\n    }\n  }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/jsobject.js\n// module id = 87\n// module chunks = 0","module.exports = require(\"js-select\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-select\"\n// module id = 88\n// module chunks = 0","module.exports = require(\"net\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"net\"\n// module id = 89\n// module chunks = 0","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 90\n// module chunks = 0","module.exports = require(\"tty\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tty\"\n// module id = 91\n// module chunks = 0","/* @flow */\nimport tmp from 'tmp';\nimport promisify from 'es6-promisify';\n\nimport {createLogger} from './logger';\n\nconst log = createLogger(__filename);\n\nexport type MakePromiseCallback = (tmpDir: TempDir) => any;\n\n\n/*\n * Work with a self-destructing temporary directory in a promise chain.\n *\n * The directory will be destroyed when the promise chain is finished\n * (whether there was an error or not).\n *\n * Usage:\n *\n * withTempDir(\n *   (tmpDir) =>\n *     doSomething(tmpDir.path())\n *     .then(...)\n * );\n *\n */\nexport function withTempDir(makePromise: MakePromiseCallback): Promise<any> {\n  const tmpDir = new TempDir();\n  return tmpDir.create()\n    .then(() => {\n      return makePromise(tmpDir);\n    })\n    .catch(tmpDir.errorHandler())\n    .then(tmpDir.successHandler());\n}\n\n/*\n * Work with a self-destructing temporary directory object.\n *\n * It is safer to use withTempDir() instead but if you know\n * what you're doing you can use it directly like:\n *\n * let tmpDir = new TempDir();\n * tmpDir.create()\n *   .then(() => {\n *     // work with tmpDir.path()\n *   })\n *   .catch(tmpDir.errorHandler())\n *   .then(tmpDir.successHandler());\n *\n */\nexport class TempDir {\n  _path: string | void;\n  _removeTempDir: Function | void;\n\n  constructor() {\n    this._path = undefined;\n    this._removeTempDir = undefined;\n  }\n\n  /*\n   * Returns a promise that is fulfilled when the temp directory has\n   * been created.\n   */\n  create(): Promise<TempDir> {\n    const createTempDir = promisify(tmp.dir, {multiArgs: true});\n    return createTempDir(\n      {\n        prefix: 'tmp-web-ext-',\n        // This allows us to remove a non-empty tmp dir.\n        unsafeCleanup: true,\n      })\n      .then((args) => {\n        const [tmpPath, removeTempDir] = args;\n        this._path = tmpPath;\n        this._removeTempDir = removeTempDir;\n        log.debug(`Created temporary directory: ${this.path()}`);\n        return this;\n      });\n  }\n\n  /*\n   * Get the absolute path of the temp directory.\n   */\n  path(): string {\n    if (!this._path) {\n      throw new Error('You cannot access path() before calling create()');\n    }\n    return this._path;\n  }\n\n  /*\n   * Returns a callback that will catch an error, remove\n   * the temporary directory, and throw the error.\n   *\n   * This is intended for use in a promise like\n   * Promise().catch(tmp.errorHandler())\n   */\n  errorHandler(): Function {\n    return (error) => {\n      this.remove();\n      throw error;\n    };\n  }\n\n  /*\n   * Returns a callback that will remove the temporary direcotry.\n   *\n   * This is intended for use in a promise like\n   * Promise().then(tmp.successHandler())\n   */\n  successHandler(): Function {\n    return (promiseResult) => {\n      this.remove();\n      return promiseResult;\n    };\n  }\n\n  /*\n   * Remove the temp directory.\n   */\n  remove() {\n    if (!this._removeTempDir) {\n      return;\n    }\n    log.debug(`Removing temporary directory: ${this.path()}`);\n    this._removeTempDir && this._removeTempDir();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/temp-dir.js","/* @flow */\nimport {main} from './program';\nimport cmd from './cmd';\nimport * as logger from './util/logger';\n\n// This only exposes util/logger so far.\n// Do we need anything else?\nconst util = {logger};\n\nexport default {main, cmd, util};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/* @flow */\nimport os from 'os';\nimport path from 'path';\nimport {readFileSync} from 'fs';\n\nimport camelCase from 'camelcase';\nimport git from 'git-rev-sync';\nimport yargs from 'yargs';\n\nimport defaultCommands from './cmd';\nimport {UsageError} from './errors';\nimport {createLogger, consoleStream as defaultLogStream} from './util/logger';\nimport {coerceCLICustomPreference} from './firefox/preferences';\nimport {checkForUpdates as defaultUpdateChecker} from './util/updates';\nimport {\n  discoverConfigFiles as defaultConfigDiscovery,\n  loadJSConfigFile as defaultLoadJSConfigFile,\n  applyConfigToArgv as defaultApplyConfigToArgv,\n} from './config';\n\nconst log = createLogger(__filename);\nconst envPrefix = 'WEB_EXT';\n\n\ntype ProgramOptions = {|\n  absolutePackageDir?: string,\n|}\n\nexport type VersionGetterFn = (absolutePackageDir: string) => string;\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype ExecuteOptions = {\n  checkForUpdates?: Function,\n  systemProcess?: typeof process,\n  logStream?: typeof defaultLogStream,\n  getVersion?: VersionGetterFn,\n  applyConfigToArgv?: typeof defaultApplyConfigToArgv,\n  discoverConfigFiles?: typeof defaultConfigDiscovery,\n  loadJSConfigFile?: typeof defaultLoadJSConfigFile,\n  shouldExitProgram?: boolean,\n  globalEnv?: string,\n}\n\n\n/*\n * The command line program.\n */\nexport class Program {\n  yargs: any;\n  commands: { [key: string]: Function };\n  shouldExitProgram: boolean;\n  verboseEnabled: boolean;\n  options: Object;\n\n  constructor(\n    argv: ?Array<string>,\n    {\n      absolutePackageDir = process.cwd(),\n    }: ProgramOptions = {}\n  ) {\n    // This allows us to override the process argv which is useful for\n    // testing.\n    // NOTE: process.argv.slice(2) removes the path to node and web-ext\n    // executables from the process.argv array.\n    argv = argv || process.argv.slice(2);\n\n    // NOTE: always initialize yargs explicitly with the package dir\n    // so that we are sure that it is going to load the 'boolean-negation: false'\n    // config (See web-ext#469 for rationale).\n    const yargsInstance = yargs(argv, absolutePackageDir);\n\n    this.verboseEnabled = false;\n    this.shouldExitProgram = true;\n    this.yargs = yargsInstance;\n    this.yargs.strict();\n\n    this.commands = {};\n    this.options = {};\n  }\n\n  command(\n    name: string, description: string, executor: Function,\n    commandOptions: Object = {}\n  ): Program {\n    this.options[camelCase(name)] = commandOptions;\n\n    this.yargs.command(name, description, (yargsForCmd) => {\n      if (!commandOptions) {\n        return;\n      }\n      return yargsForCmd\n        // Make sure the user does not add any extra commands. For example,\n        // this would be a mistake because lint does not accept arguments:\n        // web-ext lint ./src/path/to/file.js\n        .demandCommand(0, 0, undefined,\n                       'This command does not take any arguments')\n        .strict()\n        .exitProcess(this.shouldExitProgram)\n        // Calling env() will be unnecessary after\n        // https://github.com/yargs/yargs/issues/486 is fixed\n        .env(envPrefix)\n        .options(commandOptions);\n    });\n    this.commands[name] = executor;\n    return this;\n  }\n\n  setGlobalOptions(options: Object): Program {\n    // This is a convenience for setting global options.\n    // An option is only global (i.e. available to all sub commands)\n    // with the `global` flag so this makes sure every option has it.\n    this.options = {...this.options, ...options};\n    Object.keys(options).forEach((key) => {\n      options[key].global = true;\n      if (options[key].demand === undefined) {\n        // By default, all options should be \"demanded\" otherwise\n        // yargs.strict() will think they are missing when declared.\n        options[key].demand = true;\n      }\n    });\n    this.yargs.options(options);\n    return this;\n  }\n\n  enableVerboseMode(\n    logStream: typeof defaultLogStream,\n    version: string\n  ): void {\n    if (this.verboseEnabled) {\n      return;\n    }\n\n    logStream.makeVerbose();\n    log.info('Version:', version);\n    this.verboseEnabled = true;\n  }\n\n  async execute(\n    absolutePackageDir: string,\n    {\n      checkForUpdates = defaultUpdateChecker,\n      systemProcess = process,\n      logStream = defaultLogStream,\n      getVersion = defaultVersionGetter,\n      applyConfigToArgv = defaultApplyConfigToArgv,\n      discoverConfigFiles = defaultConfigDiscovery,\n      loadJSConfigFile = defaultLoadJSConfigFile,\n      shouldExitProgram = true,\n      globalEnv = WEBEXT_BUILD_ENV,\n    }: ExecuteOptions = {}\n  ): Promise<void> {\n    this.shouldExitProgram = shouldExitProgram;\n    this.yargs.exitProcess(this.shouldExitProgram);\n\n    const argv = this.yargs.argv;\n    const cmd = argv._[0];\n\n    const version = getVersion(absolutePackageDir);\n    const runCommand = this.commands[cmd];\n\n    if (argv.verbose) {\n      this.enableVerboseMode(logStream, version);\n    }\n\n    let adjustedArgv = {...argv};\n\n    try {\n      if (cmd === undefined) {\n        throw new UsageError('No sub-command was specified in the args');\n      }\n      if (!runCommand) {\n        throw new UsageError(`Unknown command: ${cmd}`);\n      }\n      if (globalEnv === 'production') {\n        checkForUpdates ({\n          version: getVersion(absolutePackageDir),\n        });\n      }\n\n      const configFiles = [];\n\n      if (argv.configDiscovery) {\n        log.debug(\n          'Discovering config files. ' +\n          'Set --no-config-discovery to disable');\n        const discoveredConfigs = await discoverConfigFiles();\n        configFiles.push(...discoveredConfigs);\n      } else {\n        log.debug('Not discovering config files');\n      }\n\n      if (argv.config) {\n        configFiles.push(path.resolve(argv.config));\n      }\n\n      if (configFiles.length) {\n        const niceFileList = configFiles\n          .map((f) => f.replace(process.cwd(), '.'))\n          .map((f) => f.replace(os.homedir(), '~'))\n          .join(', ');\n        log.info(\n          'Applying config file' +\n          `${configFiles.length !== 1 ? 's' : ''}: ` +\n          `${niceFileList}`);\n      }\n\n      configFiles.forEach((configFileName) => {\n        const configObject = loadJSConfigFile(configFileName);\n        adjustedArgv = applyConfigToArgv({\n          argv: adjustedArgv,\n          argvFromCLI: argv,\n          configFileName,\n          configObject,\n          options: this.options,\n        });\n      });\n\n      if (adjustedArgv.verbose) {\n        // Ensure that the verbose is enabled when specified in a config file.\n        this.enableVerboseMode(logStream, version);\n      }\n\n      await runCommand(adjustedArgv, {shouldExitProgram});\n\n    } catch (error) {\n      if (!(error instanceof UsageError) || adjustedArgv.verbose) {\n        log.error(`\\n${error.stack}\\n`);\n      } else {\n        log.error(`\\n${error}\\n`);\n      }\n      if (error.code) {\n        log.error(`Error code: ${error.code}\\n`);\n      }\n\n      log.debug(`Command executed: ${cmd}`);\n\n      if (this.shouldExitProgram) {\n        systemProcess.exit(1);\n      } else {\n        throw error;\n      }\n    }\n  }\n}\n\n// A global variable generated by DefinePlugin, generated in webpack.config.js\ndeclare var WEBEXT_BUILD_ENV: string;\n\n//A defintion of type of argument for defaultVersionGetter\ntype VersionGetterOptions = {\n  globalEnv?: string,\n};\n\nexport function defaultVersionGetter(\n  absolutePackageDir: string,\n  {globalEnv = WEBEXT_BUILD_ENV}: VersionGetterOptions = {}\n): string {\n  if (globalEnv === 'production') {\n    log.debug('Getting the version from package.json');\n    const packageData: any = readFileSync(\n      path.join(absolutePackageDir, 'package.json'));\n    return JSON.parse(packageData).version;\n  } else {\n    log.debug('Getting version from the git revision');\n    return `${git.branch(absolutePackageDir)}-${git.long(absolutePackageDir)}`;\n  }\n}\n\n// TODO: add pipes to Flow type after https://github.com/facebook/flow/issues/2405 is fixed\n\ntype MainParams = {\n  getVersion?: VersionGetterFn,\n  commands?: Object,\n  argv: Array<any>,\n  runOptions?: Object,\n}\n\nexport function main(\n  absolutePackageDir: string,\n  {\n    getVersion = defaultVersionGetter, commands = defaultCommands, argv,\n    runOptions = {},\n  }: MainParams = {}\n): Promise<any> {\n\n  const program = new Program(argv, {absolutePackageDir});\n\n  // yargs uses magic camel case expansion to expose options on the\n  // final argv object. For example, the 'artifacts-dir' option is alternatively\n  // available as argv.artifactsDir.\n  program.yargs\n    .usage(`Usage: $0 [options] command\n\nOption values can also be set by declaring an environment variable prefixed\nwith $${envPrefix}_. For example: $${envPrefix}_SOURCE_DIR=/path is the same as\n--source-dir=/path.\n\nTo view specific help for any given command, add the command name.\nExample: $0 --help run.\n`)\n    .help('help')\n    .alias('h', 'help')\n    .env(envPrefix)\n    .version(() => getVersion(absolutePackageDir))\n    .demandCommand(1, 'You must specify a command')\n    .strict();\n\n  program.setGlobalOptions({\n    'source-dir': {\n      alias: 's',\n      describe: 'Web extension source directory.',\n      default: process.cwd(),\n      requiresArg: true,\n      type: 'string',\n      coerce: path.resolve,\n    },\n    'artifacts-dir': {\n      alias: 'a',\n      describe: 'Directory where artifacts will be saved.',\n      default: path.join(process.cwd(), 'web-ext-artifacts'),\n      normalize: true,\n      requiresArg: true,\n      type: 'string',\n    },\n    'verbose': {\n      alias: 'v',\n      describe: 'Show verbose output',\n      type: 'boolean',\n    },\n    'ignore-files': {\n      alias: 'i',\n      describe: 'A list of glob patterns to define which files should be ' +\n                'ignored. (Example: --ignore-files=path/to/first.js ' +\n                'path/to/second.js \"**/*.log\")',\n      demand: false,\n      requiresArg: true,\n      type: 'array',\n    },\n    'no-input': {\n      describe: 'Disable all features that require standard input',\n      type: 'boolean',\n    },\n    'config': {\n      alias: 'c',\n      describe: 'Path to a CommonJS config file to set ' +\n        'option defaults',\n      default: undefined,\n      demand: false,\n      requiresArg: true,\n      type: 'string',\n    },\n    'config-discovery': {\n      describe: 'Discover config files in home directory and ' +\n        'working directory. Disable with --no-config-discovery.',\n      demand: false,\n      default: true,\n      type: 'boolean',\n    },\n  });\n\n  program\n    .command(\n      'build',\n      'Create an extension package from source',\n      commands.build, {\n        'as-needed': {\n          describe: 'Watch for file changes and re-build as needed',\n          type: 'boolean',\n        },\n        'overwrite-dest': {\n          alias: 'o',\n          describe: 'Overwrite destination package if it exists.',\n          type: 'boolean',\n        },\n      })\n    .command(\n      'sign',\n      'Sign the extension so it can be installed in Firefox',\n      commands.sign, {\n        'api-key': {\n          describe: 'API key (JWT issuer) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-secret': {\n          describe: 'API secret (JWT secret) from addons.mozilla.org',\n          demand: true,\n          type: 'string',\n        },\n        'api-url-prefix': {\n          describe: 'Signing API URL prefix',\n          default: 'https://addons.mozilla.org/api/v3',\n          demand: true,\n          type: 'string',\n        },\n        'api-proxy': {\n          describe:\n            'Use a proxy to access the signing API. ' +\n            'Example: https://yourproxy:6000 ',\n          demand: false,\n          type: 'string',\n        },\n        'id': {\n          describe:\n            'A custom ID for the extension. This has no effect if the ' +\n            'extension already declares an explicit ID in its manifest.',\n          demand: false,\n          type: 'string',\n        },\n        'timeout': {\n          describe: 'Number of milliseconds to wait before giving up',\n          type: 'number',\n        },\n      })\n    .command('run', 'Run the extension', commands.run, {\n      'target': {\n        alias: 't',\n        describe: 'The extensions runners to enable (e.g. firefox-desktop, ' +\n                  'firefox-android). Specify this option multiple times to ' +\n                  'run against multiple targets.',\n        default: 'firefox-desktop',\n        demand: false,\n        type: 'array',\n      },\n      'firefox': {\n        alias: ['f', 'firefox-binary'],\n        describe: 'Path or alias to a Firefox executable such as firefox-bin ' +\n                  'or firefox.exe. ' +\n                  'If not specified, the default Firefox will be used. ' +\n                  'You can specify the following aliases in lieu of a path: ' +\n                  'firefox, beta, nightly, firefoxdeveloperedition.',\n        demand: false,\n        type: 'string',\n      },\n      'firefox-profile': {\n        alias: 'p',\n        describe: 'Run Firefox using a copy of this profile. The profile ' +\n                  'can be specified as a directory or a name, such as one ' +\n                  'you would see in the Profile Manager. If not specified, ' +\n                  'a new temporary profile will be created.',\n        demand: false,\n        type: 'string',\n      },\n      'keep-profile-changes': {\n        describe: 'Run Firefox directly in custom profile. Any changes to ' +\n                  'the profile will be saved.',\n        demand: false,\n        type: 'boolean',\n      },\n      'no-reload': {\n        describe: 'Do not reload the extension when source files change',\n        demand: false,\n        type: 'boolean',\n      },\n      'pre-install': {\n        describe: 'Pre-install the extension into the profile before ' +\n                  'startup. This is only needed to support older versions ' +\n                  'of Firefox.',\n        demand: false,\n        type: 'boolean',\n      },\n      'pref': {\n        describe: 'Launch firefox with a custom preference ' +\n                  '(example: --pref=general.useragent.locale=fr-FR). ' +\n                  'You can repeat this option to set more than one ' +\n                  'preference.',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n        coerce: coerceCLICustomPreference,\n      },\n      'start-url': {\n        alias: ['u', 'url'],\n        describe: 'Launch firefox at specified page',\n        demand: false,\n        requiresArg: true,\n        type: 'array',\n      },\n      'browser-console': {\n        alias: ['bc'],\n        describe: 'Open the DevTools Browser Console.',\n        demand: false,\n        type: 'boolean',\n      },\n      // Firefox for Android CLI options.\n      'adb-bin': {\n        describe: 'Specify a custom path to the adb binary',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-host': {\n        describe: 'Connect to adb on the specified host',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-port': {\n        describe: 'Connect to adb on the specified port',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'adb-device': {\n        alias: ['android-device'],\n        describe: 'Connect to the specified adb device name',\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n      'firefox-apk': {\n        describe: (\n          'Run a specific Firefox for Android APK. ' +\n          'Example: org.mozilla.fennec_aurora'\n        ),\n        demand: false,\n        type: 'string',\n        requiresArg: true,\n      },\n    })\n    .command('lint', 'Validate the extension source', commands.lint, {\n      'output': {\n        alias: 'o',\n        describe: 'The type of output to generate',\n        type: 'string',\n        default: 'text',\n        choices: ['json', 'text'],\n      },\n      'metadata': {\n        describe: 'Output only metadata as JSON',\n        type: 'boolean',\n        default: false,\n      },\n      'warnings-as-errors': {\n        describe: 'Treat warnings as errors by exiting non-zero for warnings',\n        alias: 'w',\n        type: 'boolean',\n        default: false,\n      },\n      'pretty': {\n        describe: 'Prettify JSON output',\n        type: 'boolean',\n        default: false,\n      },\n      'self-hosted': {\n        describe:\n          'Your extension will be self-hosted. This disables messages ' +\n          'related to hosting on addons.mozilla.org.',\n        type: 'boolean',\n        default: false,\n      },\n      'boring': {\n        describe: 'Disables colorful shell output',\n        type: 'boolean',\n        default: false,\n      },\n    })\n    .command('docs', 'Open the web-ext documentation in a browser',\n             commands.docs, {});\n\n  return program.execute(absolutePackageDir, runOptions);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/program.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 95\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toConsumableArray.js\n// module id = 96\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/from.js\n// module id = 97\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 98\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 99\n// module chunks = 0","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 100\n// module chunks = 0","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 101\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 102\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 103\n// module chunks = 0","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 104\n// module chunks = 0","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 105\n// module chunks = 0","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 106\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/promise.js\n// module id = 107\n// module chunks = 0","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/promise.js\n// module id = 108\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 109\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 110\n// module chunks = 0","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 111\n// module chunks = 0","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.promise.js\n// module id = 112\n// module chunks = 0","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-instance.js\n// module id = 113\n// module chunks = 0","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_for-of.js\n// module id = 114\n// module chunks = 0","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_invoke.js\n// module id = 115\n// module chunks = 0","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_microtask.js\n// module id = 116\n// module chunks = 0","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_user-agent.js\n// module id = 117\n// module chunks = 0","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine-all.js\n// module id = 118\n// module chunks = 0","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-species.js\n// module id = 119\n// module chunks = 0","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.finally.js\n// module id = 120\n// module chunks = 0","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.promise.try.js\n// module id = 121\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = 122\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = 123\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = 124\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = 125\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 126\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 127\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 128\n// module chunks = 0","module.exports = require(\"git-rev-sync\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"git-rev-sync\"\n// module id = 129\n// module chunks = 0","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 130\n// module chunks = 0","module.exports = require(\"watchpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"watchpack\"\n// module id = 131\n// module chunks = 0","module.exports = require(\"debounce\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debounce\"\n// module id = 132\n// module chunks = 0","module.exports = require(\"bunyan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bunyan\"\n// module id = 133\n// module chunks = 0","/* @flow */\nimport zipDirModule from 'zip-dir';\nimport promisify from 'es6-promisify';\n\nexport const zipDir = promisify(zipDirModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/zip-dir.js","module.exports = require(\"zip-dir\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zip-dir\"\n// module id = 135\n// module chunks = 0","module.exports = require(\"strip-json-comments\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"strip-json-comments\"\n// module id = 136\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/is-iterable.js\n// module id = 137\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/is-iterable.js\n// module id = 138\n// module chunks = 0","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.is-iterable.js\n// module id = 139\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = 140\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = 141\n// module chunks = 0","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = 142\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = 143\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 144\n// module chunks = 0","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 145\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 146\n// module chunks = 0","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 147\n// module chunks = 0","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 148\n// module chunks = 0","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 149\n// module chunks = 0","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 150\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 151\n// module chunks = 0","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 152\n// module chunks = 0","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 153\n// module chunks = 0","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 154\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = 155\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = 156\n// module chunks = 0","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = 157\n// module chunks = 0","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = 158\n// module chunks = 0","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = 159\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = 160\n// module chunks = 0","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = 161\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = 162\n// module chunks = 0","module.exports = require(\"es6-error\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-error\"\n// module id = 163\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 164\n// module chunks = 0","module.exports = require(\"multimatch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multimatch\"\n// module id = 165\n// module chunks = 0","/* @flow */\nimport {createInstance as defaultLinterCreator} from 'addons-linter';\n\nimport {createLogger} from '../util/logger';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\n// import flow types\nimport type {FileFilterCreatorFn} from '../util/file-filter';\n\nconst log = createLogger(__filename);\n\n\n// Define the needed 'addons-linter' module flow types.\n\nexport type LinterOutputType = 'text' | 'json';\n\nexport type LinterCreatorParams = {|\n  config: {|\n    logLevel: 'debug' | 'fatal',\n    stack: boolean,\n    pretty?: boolean,\n    warningsAsErrors?: boolean,\n    metadata?: boolean,\n    output?: LinterOutputType,\n    boring?: boolean,\n    selfHosted?: boolean,\n    shouldScanFile: (fileName: string) => boolean,\n    _: Array<string>,\n  |},\n  runAsBinary: boolean,\n|};\n\nexport type Linter = {|\n  run: () => Promise<void>,\n|};\n\nexport type LinterCreatorFn = (params: LinterCreatorParams) => Linter;\n\n\n// Lint command types and implementation.\n\nexport type LintCmdParams = {|\n  artifactsDir?: string,\n  boring?: boolean,\n  ignoreFiles?: Array<string>,\n  metadata?: boolean,\n  output?: LinterOutputType,\n  pretty?: boolean,\n  selfHosted?: boolean,\n  sourceDir: string,\n  verbose?: boolean,\n  warningsAsErrors?: boolean,\n|};\n\nexport type LintCmdOptions = {|\n  createLinter?: LinterCreatorFn,\n  createFileFilter?: FileFilterCreatorFn,\n  shouldExitProgram?: boolean,\n|};\n\nexport default function lint(\n  {\n    artifactsDir,\n    boring,\n    ignoreFiles,\n    metadata,\n    output,\n    pretty,\n    sourceDir,\n    selfHosted,\n    verbose,\n    warningsAsErrors,\n  }: LintCmdParams,\n  {\n    createLinter = defaultLinterCreator,\n    createFileFilter = defaultFileFilterCreator,\n    shouldExitProgram = true,\n  }: LintCmdOptions = {}\n): Promise<void> {\n  const fileFilter = createFileFilter({sourceDir, ignoreFiles, artifactsDir});\n\n  log.debug(`Running addons-linter on ${sourceDir}`);\n  const linter = createLinter({\n    config: {\n      logLevel: verbose ? 'debug' : 'fatal',\n      stack: Boolean(verbose),\n      pretty,\n      warningsAsErrors,\n      metadata,\n      output,\n      boring,\n      selfHosted,\n      shouldScanFile: (fileName) => fileFilter.wantFile(fileName),\n      // This mimics the first command line argument from yargs,\n      // which should be the directory to the extension.\n      _: [sourceDir],\n    },\n    runAsBinary: shouldExitProgram,\n  });\n  return linter.run();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/lint.js","module.exports = require(\"addons-linter\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"addons-linter\"\n// module id = 167\n// module chunks = 0","/* @flow */\nimport defaultBuildExtension from './build';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxClient,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport defaultGetValidatedManifest from '../util/manifest';\nimport {\n  createExtensionRunner,\n  defaultReloadStrategy,\n  MultiExtensionRunner as DefaultMultiExtensionRunner,\n} from '../extension-runners';\n// Import objects that are only used as Flow types.\nimport type {FirefoxPreferences} from '../firefox/preferences';\n\nconst log = createLogger(__filename);\n\n\n// Run command types and implementation.\n\nexport type CmdRunParams = {|\n  artifactsDir: string,\n  browserConsole: boolean,\n  pref?: FirefoxPreferences,\n  firefox: string,\n  firefoxProfile?: string,\n  ignoreFiles?: Array<string>,\n  keepProfileChanges: boolean,\n  noInput?: boolean,\n  noReload: boolean,\n  preInstall: boolean,\n  sourceDir: string,\n  startUrl?: Array<string>,\n  target?: Array<string>,\n\n  // Android CLI options.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n|};\n\nexport type CmdRunOptions = {|\n  buildExtension: typeof defaultBuildExtension,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxClient,\n  reloadStrategy: typeof defaultReloadStrategy,\n  shouldExitProgram?: boolean,\n  MultiExtensionRunner?: typeof DefaultMultiExtensionRunner,\n  getValidatedManifest?: typeof defaultGetValidatedManifest,\n|};\n\nexport default async function run(\n  {\n    artifactsDir,\n    browserConsole = false,\n    pref,\n    firefox,\n    firefoxProfile,\n    keepProfileChanges = false,\n    ignoreFiles,\n    noInput = false,\n    noReload = false,\n    preInstall = false,\n    sourceDir,\n    startUrl,\n    target,\n    // Android CLI options.\n    adbBin,\n    adbHost,\n    adbPort,\n    adbDevice,\n    firefoxApk,\n  }: CmdRunParams,\n  {\n    buildExtension = defaultBuildExtension,\n    desktopNotifications = defaultDesktopNotifications,\n    firefoxApp = defaultFirefoxApp,\n    firefoxClient = defaultFirefoxClient,\n    reloadStrategy = defaultReloadStrategy,\n    MultiExtensionRunner = DefaultMultiExtensionRunner,\n    getValidatedManifest = defaultGetValidatedManifest,\n  }: CmdRunOptions = {}): Promise<DefaultMultiExtensionRunner> {\n\n  log.info(`Running web extension from ${sourceDir}`);\n  if (preInstall) {\n    log.info('Disabled auto-reloading because it\\'s not possible with ' +\n             '--pre-install');\n    noReload = true;\n  }\n\n  // Create an alias for --pref since it has been transformed into an\n  // object containing one or more preferences.\n  const customPrefs = pref;\n  const manifestData = await getValidatedManifest(sourceDir);\n\n  const runners = [];\n\n  const commonRunnerParams = {\n    // Common options.\n    extensions: [{sourceDir, manifestData}],\n    keepProfileChanges,\n    startUrl,\n    desktopNotifications,\n  };\n\n  if (!target || target.length === 0 || target.includes('firefox-desktop')) {\n    const firefoxDesktopRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      firefoxBinary: firefox,\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n\n      // Firefox runner injected dependencies.\n      firefoxApp,\n      firefoxClient,\n    };\n\n    const firefoxDesktopRunner = await createExtensionRunner({\n      target: 'firefox-desktop',\n      params: firefoxDesktopRunnerParams,\n    });\n    runners.push(firefoxDesktopRunner);\n  }\n\n  if (target && target.includes('firefox-android')) {\n    const firefoxAndroidRunnerParams = {\n      ...commonRunnerParams,\n\n      // Firefox specific CLI options.\n      profilePath: firefoxProfile,\n      customPrefs,\n      browserConsole,\n      preInstall,\n      firefoxApk,\n      adbDevice,\n      adbHost,\n      adbPort,\n      adbBin,\n\n      // Injected dependencies.\n      firefoxApp,\n      firefoxClient,\n      desktopNotifications: defaultDesktopNotifications,\n      buildSourceDir: (extensionSourceDir: string, tmpArtifactsDir: string) => {\n        return buildExtension({\n          sourceDir: extensionSourceDir,\n          ignoreFiles,\n          asNeeded: false,\n          // Use a separate temporary directory for building the extension zip file\n          // that we are going to upload on the android device.\n          artifactsDir: tmpArtifactsDir,\n        }, {\n          // Suppress the message usually logged by web-ext build.\n          showReadyMessage: false,\n        });\n      },\n    };\n\n    const firefoxAndroidRunner = await createExtensionRunner({\n      target: 'firefox-android',\n      params: firefoxAndroidRunnerParams,\n    });\n    runners.push(firefoxAndroidRunner);\n  }\n\n  const extensionRunner = new MultiExtensionRunner({\n    desktopNotifications,\n    runners,\n  });\n\n  await extensionRunner.run();\n\n  if (noReload) {\n    log.info('Automatic extension reloading has been disabled');\n  } else {\n    log.info('The extension will reload if any source file changes');\n\n    reloadStrategy({\n      extensionRunner,\n      sourceDir,\n      artifactsDir,\n      ignoreFiles,\n      noInput,\n    });\n  }\n\n  return extensionRunner;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/run.js","module.exports = require(\"node-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-notifier\"\n// module id = 169\n// module chunks = 0","module.exports = require(\"fx-runner\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fx-runner\"\n// module id = 170\n// module chunks = 0","module.exports = require(\"firefox-profile\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"firefox-profile\"\n// module id = 171\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {onlyErrorsWithCode} from '../errors';\n\n/*\n * Resolves true if the path is a readable directory.\n *\n * Usage:\n *\n * isDirectory('/some/path')\n *  .then((dirExists) => {\n *    // dirExists will be true or false.\n *  });\n *\n * */\nexport default function isDirectory(path: string): Promise<boolean> {\n  return fs.stat(path)\n    .then((stats) => stats.isDirectory())\n    .catch(onlyErrorsWithCode(['ENOENT', 'ENOTDIR'], () => {\n      return false;\n    }));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/is-directory.js","'use strict';\n\n// See https://github.com/jshint/jshint/issues/1747 for context\n/* global -Promise */\nvar Promise = require('es6-promise').Promise;\nvar FirefoxClient = require('@cliqz-oss/firefox-client');\n\nmodule.exports = connect;\n\nfunction connect(port) {\n  return new Promise(function(resolve, reject) {\n\n    var client = new FirefoxClient();\n    client.connect(port, function(err) {\n      if (err) {\n        reject(err);\n      }\n      resolve(client);\n    });\n\n    client.on('error', reject);\n    client.on('timeout', reject);\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/node-firefox-connect/index.js\n// module id = 173\n// module chunks = 0","module.exports = require(\"es6-promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promise\"\n// module id = 174\n// module chunks = 0","module.exports = require(\"./lib/browser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/index.js\n// module id = 175\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Client = require(\"./client\"),\n    Tab = require(\"./tab\"),\n    Webapps = require(\"./webapps\"),\n    Device = require(\"./device\"),\n    SimulatorApps = require(\"./simulator\");\n\nconst DEFAULT_PORT = 6000;\nconst DEFAULT_HOST = \"localhost\";\n\nmodule.exports = FirefoxClient;\n\nfunction FirefoxClient(options) {\n  var client = new Client(options);\n  var actor = 'root';\n\n  client.on(\"error\", this.onError.bind(this));\n  client.on(\"end\", this.onEnd.bind(this));\n  client.on(\"timeout\", this.onTimeout.bind(this));\n\n  this.initialize(client, actor);\n}\n\nFirefoxClient.prototype = extend(ClientMethods, {\n  connect: function(port, host, cb) {\n    if (typeof port == \"function\") {\n      // (cb)\n      cb = port;\n      port = DEFAULT_PORT;\n      host = DEFAULT_HOST;\n\n    }\n    if (typeof host == \"function\") {\n      // (port, cb)\n      cb = host;\n      host = DEFAULT_HOST;\n    }\n    // (port, host, cb)\n\n    this.client.connect(port, host, cb);\n\n    this.client.expectReply(this.actor, function(packet) {\n      // root message\n    });\n  },\n\n  disconnect: function() {\n    this.client.disconnect();\n  },\n\n  onError: function(error) {\n    this.emit(\"error\", error);\n  },\n\n  onEnd: function() {\n    this.emit(\"end\");\n  },\n\n  onTimeout: function() {\n    this.emit(\"timeout\");\n  },\n\n  selectedTab: function(cb) {\n    this.request(\"listTabs\", function(resp) {\n      var tab = resp.tabs[resp.selected];\n      return new Tab(this.client, tab);\n    }.bind(this), cb);\n  },\n\n  listTabs: function(cb) {\n    this.request(\"listTabs\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      if (resp.simulatorWebappsActor) {\n        // the server is the Firefox OS Simulator, return apps as \"tabs\"\n        var apps = new SimulatorApps(this.client, resp.simulatorWebappsActor);\n        apps.listApps(cb);\n      }\n      else {\n        var tabs = resp.tabs.map(function(tab) {\n          return new Tab(this.client, tab);\n        }.bind(this));\n        cb(null, tabs);\n      }\n    }.bind(this));\n  },\n\n  getWebapps: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      var webapps = new Webapps(this.client, resp);\n      cb(null, webapps);\n    }).bind(this));\n  },\n\n  getDevice: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      var device = new Device(this.client, resp);\n      cb(null, device);\n    }).bind(this));\n  },\n\n  getRoot: function(cb) {\n    this.request(\"listTabs\", (function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n      if (!resp.consoleActor) {\n        return cb(\"No root actor being available.\");\n      }\n      var root = new Tab(this.client, resp);\n      cb(null, root);\n    }).bind(this));\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/browser.js\n// module id = 176\n// module chunks = 0","var net = require(\"net\"),\n    events = require(\"events\"),\n    extend = require(\"./extend\");\n\nvar colors = require(\"colors\");\n\nmodule.exports = Client;\n\n// this is very unfortunate! and temporary. we can't\n// rely on 'type' property to signify an event, and we\n// need to write clients for each actor to handle differences\n// in actor protocols\nvar unsolicitedEvents = {\n  \"tabNavigated\": \"tabNavigated\",\n  \"styleApplied\": \"styleApplied\",\n  \"propertyChange\": \"propertyChange\",\n  \"networkEventUpdate\": \"networkEventUpdate\",\n  \"networkEvent\": \"networkEvent\",\n  \"propertyChange\": \"propertyChange\",\n  \"newMutations\": \"newMutations\",\n  \"appOpen\": \"appOpen\",\n  \"appClose\": \"appClose\",\n  \"appInstall\": \"appInstall\",\n  \"appUninstall\": \"appUninstall\",\n  \"frameUpdate\": \"frameUpdate\",\n  \"tabListChanged\": \"tabListChanged\"\n};\n\n/**\n * a Client object handles connecting with a Firefox remote debugging\n * server instance (e.g. a Firefox instance), plus sending and receiving\n * packets on that conection using the Firefox remote debugging protocol.\n *\n * Important methods:\n * connect - Create the connection to the server.\n * makeRequest - Make a request to the server with a JSON message,\n *   and a callback to call with the response.\n *\n * Important events:\n * 'message' - An unsolicited (e.g. not a response to a prior request)\n *    packet has been received. These packets usually describe events.\n */\nfunction Client(options) {\n  this.options = options || {};\n\n  this.incoming = new Buffer(\"\");\n\n  this._pendingRequests = [];\n  this._activeRequests = {};\n}\n\nClient.prototype = extend(events.EventEmitter.prototype, {\n  connect: function(port, host, cb) {\n    this.client = net.createConnection({\n      port: port,\n      host: host\n    });\n\n    this.client.on(\"connect\", cb);\n    this.client.on(\"data\", this.onData.bind(this));\n    this.client.on(\"error\", this.onError.bind(this));\n    this.client.on(\"end\", this.onEnd.bind(this));\n    this.client.on(\"timeout\", this.onTimeout.bind(this));\n  },\n\n  disconnect: function() {\n    if (this.client) {\n      this.client.end();\n    }\n  },\n\n  /**\n   * Set a request to be sent to an actor on the server. If the actor\n   * is already handling a request, queue this request until the actor\n   * has responded to the previous request.\n   *\n   * @param {object} request\n   *        Message to be JSON-ified and sent to server.\n   * @param {function} callback\n   *        Function that's called with the response from the server.\n   */\n  makeRequest: function(request, callback) {\n    this.log(\"request: \" + JSON.stringify(request).green);\n\n    if (!request.to) {\n      var type = request.type || \"\";\n      throw new Error(type + \" request packet has no destination.\");\n    }\n    this._pendingRequests.push({ to: request.to,\n                                 message: request,\n                                 callback: callback });\n    this._flushRequests();\n  },\n\n  /**\n   * Activate (send) any pending requests to actors that don't have an\n   * active request.\n   */\n  _flushRequests: function() {\n    this._pendingRequests = this._pendingRequests.filter(function(request) {\n      // only one active request per actor at a time\n      if (this._activeRequests[request.to]) {\n        return true;\n      }\n\n      // no active requests for this actor, so activate this one\n      this.sendMessage(request.message);\n      this.expectReply(request.to, request.callback);\n\n      // remove from pending requests\n      return false;\n    }.bind(this));\n  },\n\n  /**\n   * Send a JSON message over the connection to the server.\n   */\n  sendMessage: function(message) {\n    if (!message.to) {\n      throw new Error(\"No actor specified in request\");\n    }\n    if (!this.client) {\n      throw new Error(\"Not connected, connect() before sending requests\");\n    }\n    var str = JSON.stringify(message);\n\n    // message is preceded by byteLength(message):\n    str = (new Buffer(str).length) + \":\" + str;\n\n    this.client.write(str);\n  },\n\n  /**\n   * Arrange to hand the next reply from |actor| to |handler|.\n   */\n  expectReply: function(actor, handler) {\n    if (this._activeRequests[actor]) {\n      throw Error(\"clashing handlers for next reply from \" + uneval(actor));\n    }\n    this._activeRequests[actor] = handler;\n  },\n\n  /**\n   * Handler for a new message coming in. It's either an unsolicited event\n   * from the server, or a response to a previous request from the client.\n   */\n  handleMessage: function(message) {\n    if (!message.from) {\n      if (message.error) {\n        throw new Error(message.message);\n      }\n      throw new Error(\"Server didn't specify an actor: \" + JSON.stringify(message));\n    }\n\n    if (!(message.type in unsolicitedEvents)\n        && this._activeRequests[message.from]) {\n      this.log(\"response: \" + JSON.stringify(message).yellow);\n\n      var callback = this._activeRequests[message.from];\n      delete this._activeRequests[message.from];\n\n      callback(message);\n\n      this._flushRequests();\n    }\n    else if (message.type) {\n      // this is an unsolicited event from the server\n      this.log(\"unsolicited event: \".grey + JSON.stringify(message).grey);\n\n      this.emit('message', message);\n      return;\n    }\n    else {\n      throw new Error(\"Unexpected packet from actor \" +  message.from\n      +  JSON.stringify(message));\n    }\n  },\n\n  /**\n   * Called when a new data chunk is received on the connection.\n   * Parse data into message(s) and call message handler for any full\n   * messages that are read in.\n   */\n  onData: function(data) {\n    this.incoming = Buffer.concat([this.incoming, data]);\n\n    while(this.readMessage()) {};\n  },\n\n  /**\n   * Parse out and process the next message from the data read from\n   * the connection. Returns true if a full meassage was parsed, false\n   * otherwise.\n   */\n  readMessage: function() {\n    var sep = this.incoming.toString().indexOf(':');\n    if (sep < 0) {\n      return false;\n    }\n\n    // beginning of a message is preceded by byteLength(message) + \":\"\n    var count = parseInt(this.incoming.slice(0, sep));\n\n    if (this.incoming.length - (sep + 1) < count) {\n      this.log(\"no complete response yet\".grey);\n      return false;\n    }\n    this.incoming = this.incoming.slice(sep + 1);\n\n    var packet = this.incoming.slice(0, count);\n\n    this.incoming = this.incoming.slice(count);\n\n    var message;\n    try {\n      message = JSON.parse(packet.toString());\n    } catch(e) {\n      throw new Error(\"Couldn't parse packet from server as JSON \" + e\n        + \", message:\\n\" + packet);\n    }\n    this.handleMessage(message);\n\n    return true;\n  },\n\n  onError: function(error) {\n    var code = error.code ? error.code : error;\n    this.log(\"connection error: \".red + code.red);\n    this.emit(\"error\", error);\n  },\n\n  onEnd: function() {\n    this.log(\"connection closed by server\".red);\n    this.emit(\"end\");\n  },\n\n  onTimeout: function() {\n    this.log(\"connection timeout\".red);\n    this.emit(\"timeout\");\n  },\n\n  log: function(str) {\n    if (this.options.log) {\n      console.log(str);\n    }\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/client.js\n// module id = 177\n// module chunks = 0","module.exports = require(\"colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors\"\n// module id = 178\n// module chunks = 0","var select = require(\"js-select\"),\n    extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    JSObject = require(\"./jsobject\");\n\nmodule.exports = Console;\n\nfunction Console(client, actor) {\n  this.initialize(client, actor);\n\n  this.on(\"consoleAPICall\", this.onConsoleAPI.bind(this));\n  this.on(\"pageError\", this.onPageError.bind(this));\n}\n\nConsole.prototype = extend(ClientMethods, {\n  types: [\"PageError\", \"ConsoleAPI\"],\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  startListening: function(cb) {\n    this.request('startListeners', { listeners: this.types }, cb);\n  },\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  stopListening: function(cb) {\n    this.request('stopListeners', { listeners: this.types }, cb);\n  },\n\n  /**\n   * Event object:\n   *   level - \"log\", etc.\n   *   filename - file with call\n   *   lineNumber - line number of call\n   *   functionName - function log called from\n   *   timeStamp - ms timestamp of call\n   *   arguments - array of the arguments to log call\n   *   private -\n   */\n  onConsoleAPI: function(event) {\n    var message = this.transformConsoleCall(event.message);\n\n    this.emit(\"console-api-call\", message);\n  },\n\n  /**\n   * Event object:\n   *   errorMessage - string error message\n   *   sourceName - file error\n   *   lineText\n   *   lineNumber - line number of error\n   *   columnNumber - column number of error\n   *   category - usually \"content javascript\",\n   *   timeStamp - time in ms of error occurance\n   *   warning - whether it's a warning\n   *   error - whether it's an error\n   *   exception - whether it's an exception\n   *   strict -\n   *   private -\n   */\n  onPageError: function(event) {\n    this.emit(\"page-error\", event.pageError);\n  },\n\n  /**\n   * Response object: array of page error or console call objects.\n   */\n  getCachedLogs: function(cb) {\n    var message = {\n      messageTypes: this.types\n    };\n    this.request('getCachedMessages', message, function(resp) {\n      select(resp, \".messages > *\").update(this.transformConsoleCall.bind(this));\n      return resp.messages;\n    }.bind(this), cb);\n  },\n\n  /**\n   * Response object:\n   *   -empty-\n   */\n  clearCachedLogs: function(cb) {\n    this.request('clearMessagesCache', cb);\n  },\n\n  /**\n   * Response object:\n   *   input - original input\n   *   result - result of the evaluation, a value or JSObject\n   *   timestamp - timestamp in ms of the evaluation\n   *   exception - any exception as a result of the evaluation\n   */\n  evaluateJS: function(text, cb) {\n    this.request('evaluateJS', { text: text }, function(resp) {\n      return select(resp, \".result, .exception\")\n             .update(this.createJSObject.bind(this));\n    }.bind(this), cb)\n  },\n\n  transformConsoleCall: function(message) {\n    return select(message, \".arguments > *\").update(this.createJSObject.bind(this));\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/console.js\n// module id = 179\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Memory;\n\nfunction Memory(client, actor) {\n  this.initialize(client, actor);\n}\n\nMemory.prototype = extend(ClientMethods, {\n  measure: function(cb) {\n    this.request('measure', function (err, resp) {\n      cb(err, resp);\n    });\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/memory.js\n// module id = 180\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Node = require(\"./domnode\");\n\nmodule.exports = DOM;\n\nfunction DOM(client, actor) {\n  this.initialize(client, actor);\n  this.walker = null;\n}\n\nDOM.prototype = extend(ClientMethods, {\n  document: function(cb) {\n    this.walkerRequest(\"document\", function(err, resp) {\n      if (err) return cb(err);\n\n      var node = new Node(this.client, this.walker, resp.node);\n      cb(null, node);\n    }.bind(this))\n  },\n\n  documentElement: function(cb) {\n    this.walkerRequest(\"documentElement\", function(err, resp) {\n      var node = new Node(this.client, this.walker, resp.node);\n      cb(err, node);\n    }.bind(this))\n  },\n\n  querySelector: function(selector, cb) {\n    this.document(function(err, node) {\n      if (err) return cb(err);\n\n      node.querySelector(selector, cb);\n    })\n  },\n\n  querySelectorAll: function(selector, cb) {\n    this.document(function(err, node) {\n      if (err) return cb(err);\n\n      node.querySelectorAll(selector, cb);\n    })\n  },\n\n  getComputedStyle: function(node, cb) {\n    this.styleRequest(\"getComputed\", { node: node.actor },\n                      this.pluck('computed'), cb);\n  },\n\n  getUsedFontFaces: function(node, options, cb) {\n    var message = {\n      node: node.actor,\n      includePreviews: options.includePreviews,\n      previewText: options.previewText,\n      previewFontSize: options.previewFontSize\n    };\n\n    this.styleRequest(\"getUsedFontFaces\", message,\n                      this.pluck('fontFaces'), cb);\n  },\n\n  getFontPreview: function(node, font, cb) {\n    this.styleRequest(\"getFontPreview\", { node: node.actor, font: font }, cb);\n  },\n\n  walkerRequest: function(type, message, cb) {\n    this.getWalker(function(err, walker) {\n      walker.request(type, message, cb);\n    });\n  },\n\n  getWalker: function(cb) {\n    if (this.walker) {\n      return cb(null, this.walker);\n    }\n    this.request('getWalker', function(err, resp) {\n      this.walker = new Walker(this.client, resp.walker);\n      cb(err, this.walker);\n    }.bind(this))\n  },\n\n  styleRequest: function(type, message, transform, cb) {\n    this.getStyle(function(err, style) {\n      if (err) throw err;\n\n      style.request(type, message, transform, cb);\n    })\n  },\n\n  getStyle: function(cb) {\n    if (this.style) {\n      return cb(null, this.style);\n    }\n    this.request('getPageStyle', function(err, resp) {\n      this.style = new Style(this.client, resp.pageStyle);\n      cb(err, this.style);\n    }.bind(this))\n  }\n})\n\nfunction Walker(client, walker) {\n  this.initialize(client, walker.actor);\n\n  this.root = new Node(client, this, walker.root);\n}\n\nWalker.prototype = extend(ClientMethods, {});\n\nfunction Style(client, style) {\n  this.initialize(client, style.actor);\n}\n\nStyle.prototype = extend(ClientMethods, {});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/dom.js\n// module id = 181\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Node;\n\nfunction Node(client, walker, node) {\n  this.initialize(client, node.actor);\n  this.walker = walker;\n\n  this.getNode = this.getNode.bind(this);\n  this.getNodeArray = this.getNodeArray.bind(this);\n  this.getNodeList = this.getNodeList.bind(this);\n\n  walker.on('newMutations', function(event) {\n    //console.log(\"on new mutations! \", JSON.stringify(event));\n  });\n\n  ['nodeType', 'nodeName', 'namespaceURI', 'attrs']\n  .forEach(function(attr) {\n    this[attr] = node[attr];\n  }.bind(this));\n}\n\nNode.prototype = extend(ClientMethods, {\n  getAttribute: function(name) {\n    for (var i in this.attrs) {\n      var attr = this.attrs[i];\n      if (attr.name == name) {\n        return attr.value;\n      }\n    }\n  },\n\n  setAttribute: function(name, value, cb) {\n    var mods = [{\n      attributeName: name,\n      newValue: value\n    }];\n    this.request('modifyAttributes', { modifications: mods }, cb);\n  },\n\n  parentNode: function(cb) {\n    this.parents(function(err, nodes) {\n      if (err) {\n        return cb(err);\n      }\n      var node = null;\n      if (nodes.length) {\n        node = nodes[0];\n      }\n      cb(null, node);\n    })\n  },\n\n  parents: function(cb) {\n    this.nodeRequest('parents', this.getNodeArray, cb);\n  },\n\n  children: function(cb) {\n    this.nodeRequest('children', this.getNodeArray, cb);\n  },\n\n  siblings: function(cb) {\n    this.nodeRequest('siblings', this.getNodeArray, cb);\n  },\n\n  nextSibling: function(cb) {\n    this.nodeRequest('nextSibling', this.getNode, cb);\n  },\n\n  previousSibling: function(cb) {\n    this.nodeRequest('previousSibling', this.getNode, cb);\n  },\n\n  querySelector: function(selector, cb) {\n    this.nodeRequest('querySelector', { selector: selector },\n                     this.getNode, cb);\n  },\n\n  querySelectorAll: function(selector, cb) {\n    this.nodeRequest('querySelectorAll', { selector: selector },\n                     this.getNodeList, cb);\n  },\n\n  getUniqueSelector: function(cb) {\n    this.request('getUniqueSelector', cb);\n  },\n\n  innerHTML: function(cb) {\n    this.nodeRequest('innerHTML', function(resp) {\n      return resp.value;\n    }, cb)\n  },\n\n  outerHTML: function(cb) {\n    this.nodeRequest('outerHTML', function(resp) {\n      return resp.value;\n    }, cb)\n  },\n\n  remove: function(cb) {\n    this.nodeRequest('removeNode', function(resp) {\n      return new Node(this.client, this.walker, resp.nextSibling);\n    }.bind(this), cb);\n  },\n\n  highlight: function(cb) {\n    this.nodeRequest('highlight', cb);\n  },\n\n  release: function(cb) {\n    this.nodeRequest('releaseNode', cb);\n  },\n\n  getNode: function(resp) {\n    if (resp.node) {\n      return new Node(this.client, this.walker, resp.node);\n    }\n    return null;\n  },\n\n  getNodeArray: function(resp) {\n    return resp.nodes.map(function(form) {\n      return new Node(this.client, this.walker, form);\n    }.bind(this));\n  },\n\n  getNodeList: function(resp) {\n    return new NodeList(this.client, this.walker, resp.list);\n  },\n\n  nodeRequest: function(type, message, transform, cb) {\n    if (!cb) {\n      cb = transform;\n      transform = message;\n      message = {};\n    }\n    message.node = this.actor;\n\n    this.walker.request(type, message, transform, cb);\n  }\n});\n\nfunction NodeList(client, walker, list) {\n  this.client = client;\n  this.walker = walker;\n  this.actor = list.actor;\n\n  this.length = list.length;\n}\n\nNodeList.prototype = extend(ClientMethods, {\n  items: function(start, end, cb) {\n    if (typeof start == \"function\") {\n      cb = start;\n      start = 0;\n      end = this.length;\n    }\n    else if (typeof end == \"function\") {\n      cb = end;\n      end = this.length;\n    }\n    this.request('items', { start: start, end: end },\n      this.getNodeArray.bind(this), cb);\n  },\n\n  // TODO: add this function to ClientMethods\n  getNodeArray: function(resp) {\n    return resp.nodes.map(function(form) {\n      return new Node(this.client, this.walker, form);\n    }.bind(this));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/domnode.js\n// module id = 182\n// module chunks = 0","var extend = require(\"./extend\");\nvar ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Network;\n\nfunction Network(client, actor) {\n  this.initialize(client, actor);\n\n  this.on(\"networkEvent\", this.onNetworkEvent.bind(this));\n}\n\nNetwork.prototype = extend(ClientMethods, {\n  types: [\"NetworkActivity\"],\n\n  startLogging: function(cb) {\n    this.request('startListeners', { listeners: this.types }, cb);\n  },\n\n  stopLogging: function(cb) {\n    this.request('stopListeners', { listeners: this.types }, cb);\n  },\n\n  onNetworkEvent: function(event) {\n    var networkEvent = new NetworkEvent(this.client, event.eventActor);\n\n    this.emit(\"network-event\", networkEvent);\n  },\n\n  sendHTTPRequest: function(request, cb) {\n    this.request('sendHTTPRequest', { request: request }, function(resp) {\n      return new NetworkEvent(this.client, resp.eventActor);\n    }.bind(this), cb);\n  }\n})\n\nfunction NetworkEvent(client, event) {\n  this.initialize(client, event.actor);\n  this.event = event;\n\n  this.on(\"networkEventUpdate\", this.onUpdate.bind(this));\n}\n\nNetworkEvent.prototype = extend(ClientMethods, {\n  get url() {\n   return this.event.url;\n  },\n\n  get method() {\n    return this.event.method;\n  },\n\n  get isXHR() {\n    return this.event.isXHR;\n  },\n\n  getRequestHeaders: function(cb) {\n    this.request('getRequestHeaders', cb);\n  },\n\n  getRequestCookies: function(cb) {\n    this.request('getRequestCookies', this.pluck('cookies'), cb);\n  },\n\n  getRequestPostData: function(cb) {\n    this.request('getRequestPostData', cb);\n  },\n\n  getResponseHeaders: function(cb) {\n    this.request('getResponseHeaders', cb);\n  },\n\n  getResponseCookies: function(cb) {\n    this.request('getResponseCookies', this.pluck('cookies'), cb);\n  },\n\n  getResponseContent: function(cb) {\n    this.request('getResponseContent', cb);\n  },\n\n  getEventTimings: function(cb) {\n    this.request('getEventTimings', cb);\n  },\n\n  onUpdate: function(event) {\n    var types = {\n      \"requestHeaders\": \"request-headers\",\n      \"requestCookies\": \"request-cookies\",\n      \"requestPostData\": \"request-postdata\",\n      \"responseStart\": \"response-start\",\n      \"responseHeaders\": \"response-headers\",\n      \"responseCookies\": \"response-cookies\",\n      \"responseContent\": \"response-content\",\n      \"eventTimings\": \"event-timings\"\n    }\n\n    var type = types[event.updateType];\n    delete event.updateType;\n\n    this.emit(type, event);\n  }\n})\n\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/network.js\n// module id = 183\n// module chunks = 0","var extend = require(\"./extend\");\nvar ClientMethods = require(\"./client-methods\");\n\nmodule.exports = StyleSheets;\n\nfunction StyleSheets(client, actor) {\n  this.initialize(client, actor);\n}\n\nStyleSheets.prototype = extend(ClientMethods, {\n  getStyleSheets: function(cb) {\n    this.request('getStyleSheets', function(resp) {\n      return resp.styleSheets.map(function(sheet) {\n        return new StyleSheet(this.client, sheet);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  addStyleSheet: function(text, cb) {\n    this.request('addStyleSheet', { text: text }, function(resp) {\n      return new StyleSheet(this.client, resp.styleSheet);\n    }.bind(this), cb);\n  }\n})\n\nfunction StyleSheet(client, sheet) {\n  this.initialize(client, sheet.actor);\n  this.sheet = sheet;\n\n  this.on(\"propertyChange\", this.onPropertyChange.bind(this));\n}\n\nStyleSheet.prototype = extend(ClientMethods, {\n  get href() {\n    return this.sheet.href;\n  },\n\n  get disabled() {\n    return this.sheet.disabled;\n  },\n\n  get ruleCount() {\n    return this.sheet.ruleCount;\n  },\n\n  onPropertyChange: function(event) {\n    this.sheet[event.property] = event.value;\n    this.emit(event.property + \"-changed\", event.value);\n  },\n\n  toggleDisabled: function(cb) {\n    this.request('toggleDisabled', function(err, resp) {\n      if (err) return cb(err);\n\n      this.sheet.disabled = resp.disabled;\n      cb(null, resp.disabled);\n    }.bind(this));\n  },\n\n  getOriginalSources: function(cb) {\n    this.request('getOriginalSources', function(resp) {\n      if (resp.originalSources === null) {\n        return [];\n      }\n      return resp.originalSources.map(function(form) {\n        return new OriginalSource(this.client, form);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  getMediaRules: function(cb) {\n    this.request('getMediaRules', function(resp) {\n      return resp.mediaRules.map(function(form) {\n        return new MediaRule(this.client, form);\n      }.bind(this));\n    }.bind(this), cb);\n  },\n\n  update: function(text, cb) {\n    this.request('update', { text: text, transition: true }, cb);\n  },\n\n  getText: function(cb) {\n    this.request('getText', this.pluck('text'), cb);\n  }\n});\n\nfunction MediaRule(client, rule) {\n  this.initialize(client, rule.actor);\n  this.rule = rule;\n\n  this.on(\"matchesChange\", function(event) {\n    this.emit(\"matches-change\", event.matches);\n  }.bind(this));\n}\nMediaRule.prototype = extend(ClientMethods, {\n  get mediaText() {\n    return this.rule.mediaText;\n  },\n\n  get matches() {\n    return this.rule.matches;\n  }\n})\n\nfunction OriginalSource(client, source) {\n  console.log(\"source\", source);\n  this.initialize(client, source.actor);\n\n  this.source = source;\n}\n\nOriginalSource.prototype = extend(ClientMethods, {\n  get url()  {\n    return this.source.url\n  },\n\n  getText: function(cb) {\n    this.request('getText', this.pluck('text'), cb);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/stylesheets.js\n// module id = 184\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Tab = require(\"./tab\"),\n    fs = require(\"fs\"),\n    spawn = require(\"child_process\").spawn;\n\nmodule.exports = Webapps;\n\nvar CHUNK_SIZE = 20480;\n\n// Also dispatch appOpen/appClose, appInstall/appUninstall events\nfunction Webapps(client, tab) {\n  this.initialize(client, tab.webappsActor);\n}\n\nWebapps.prototype = extend(ClientMethods, {\n  watchApps: function(cb) {\n    this.request(\"watchApps\", cb);\n  },\n  unwatchApps: function(cb) {\n    this.request(\"unwatchApps\", cb);\n  },\n  launch: function(manifestURL, cb) {\n    this.request(\"launch\", {manifestURL: manifestURL}, cb);\n  },\n  close: function(manifestURL, cb) {\n    this.request(\"close\", {manifestURL: manifestURL}, cb);\n  },\n  getInstalledApps: function(cb) {\n    this.request(\"getAll\", function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      cb(null, resp.apps);\n    });\n  },\n  listRunningApps: function(cb) {\n    this.request(\"listRunningApps\", function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      cb(null, resp.apps);\n    });\n  },\n  getApp: function(manifestURL, cb) {\n    this.request(\"getAppActor\", {manifestURL: manifestURL}, (function (err, resp) {\n      if (err) {\n        cb(err);\n        return;\n      }\n      var actor = new Tab(this.client, resp.actor);\n      cb(null, actor);\n    }).bind(this));\n  },\n  installHosted: function(options, cb) {\n    this.request(\n      \"install\",\n      { appId: options.appId,\n        metadata: options.metadata,\n        manifest: options.manifest },\n      function (err, resp) {\n        if (err || resp.error) {\n          cb(err || resp.error);\n          return;\n        }\n        cb(null, resp.appId);\n      });\n  },\n  _upload: function (path, cb) {\n    // First create an upload actor\n    this.request(\"uploadPackage\", function (err, resp) {\n      var actor = resp.actor;\n      fs.readFile(path, function(err, data) {\n        chunk(actor, data);\n      });\n    });\n    // Send push the file chunk by chunk\n    var self = this;\n    var step = 0;\n    function chunk(actor, data) {\n      var i = step++ * CHUNK_SIZE;\n      var m = Math.min(i + CHUNK_SIZE, data.length);\n      var c = \"\";\n      for(; i < m; i++)\n        c += String.fromCharCode(data[i]);\n      var message = {\n        to: actor,\n        type: \"chunk\",\n        chunk: c\n      };\n      self.client.makeRequest(message, function(resp) {\n        if (resp.error) {\n          cb(resp);\n          return;\n        }\n        if (i < data.length) {\n          setTimeout(chunk, 0, actor, data);\n        } else {\n          done(actor);\n        }\n      });\n    }\n    // Finally close the upload\n    function done(actor) {\n      var message = {\n        to: actor,\n        type: \"done\"\n      };\n      self.client.makeRequest(message, function(resp) {\n        if (resp.error) {\n          cb(resp);\n        } else {\n          cb(null, actor, cleanup.bind(null, actor));\n        }\n      });\n    }\n\n    // Remove the temporary uploaded file from the server:\n    function cleanup(actor) {\n      var message = {\n        to: actor,\n        type: \"remove\"\n      };\n      self.client.makeRequest(message, function () {});\n    }\n  },\n  installPackaged: function(path, appId, cb) {\n    this._upload(path, (function (err, actor, cleanup) {\n      this.request(\"install\", {appId: appId, upload: actor},\n        function (err, resp) {\n          if (err) {\n            cb(err);\n            return;\n          }\n          cb(null, resp.appId);\n          cleanup();\n        });\n    }).bind(this));\n  },\n  installPackagedWithADB: function(path, appId, cb) {\n    var self = this;\n    // First ensure the temporary folder exists\n    function createTemporaryFolder() {\n      var c = spawn(\"adb\", [\"shell\", \"mkdir -p /data/local/tmp/b2g/\" + appId], {stdio:\"inherit\"});\n      c.on(\"close\", uploadPackage);\n    }\n    // then upload the package to the temporary directory\n    function uploadPackage() {\n      var child = spawn(\"adb\", [\"push\", path, \"/data/local/tmp/b2g/\" + appId + \"/application.zip\"], {stdio:\"inherit\"});\n      child.on(\"close\", installApp);\n    }\n    // finally order the webapps actor to install the app\n    function installApp() {\n      self.request(\"install\", {appId: appId},\n        function (err, resp) {\n          if (err) {\n            cb(err);\n            return;\n          }\n          cb(null, resp.appId);\n        });\n    }\n    createTemporaryFolder();\n  },\n  uninstall: function(manifestURL, cb) {\n    this.request(\"uninstall\", {manifestURL: manifestURL}, cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/webapps.js\n// module id = 185\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 186\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\");\n\nmodule.exports = Device;\n\nfunction Device(client, tab) {\n  this.initialize(client, tab.deviceActor);\n}\n\nDevice.prototype = extend(ClientMethods, {\n  getDescription: function(cb) {\n    this.request(\"getDescription\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      cb(null, resp.value);\n    });\n  },\n  getRawPermissionsTable: function(cb) {\n    this.request(\"getRawPermissionsTable\", function(err, resp) {\n      if (err) {\n        return cb(err);\n      }\n\n      cb(null, resp.value.rawPermissionsTable);\n    });\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/device.js\n// module id = 187\n// module chunks = 0","var extend = require(\"./extend\"),\n    ClientMethods = require(\"./client-methods\"),\n    Tab = require(\"./tab\");\n\nmodule.exports = SimulatorApps;\n\nfunction SimulatorApps(client, actor) {\n  this.initialize(client, actor);\n}\n\nSimulatorApps.prototype = extend(ClientMethods, {\n  listApps: function(cb) {\n    this.request('listApps', function(resp) {\n      var apps = [];\n      for (var url in resp.apps) {\n        var app = resp.apps[url];\n        apps.push(new Tab(this.client, app));\n      }\n      return apps;\n    }.bind(this), cb);\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@cliqz-oss/firefox-client/lib/simulator.js\n// module id = 188\n// module chunks = 0","/* @flow */\n\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport type Watchpack from 'watchpack';\n\nimport type {\n  IExtensionRunner, // eslint-disable-line import/named\n  ExtensionRunnerReloadResult,\n} from './base';\nimport {WebExtError} from '../errors';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport type {FirefoxAndroidExtensionRunnerParams} from './firefox-android';\nimport type {FirefoxDesktopExtensionRunnerParams} from './firefox-desktop';\nimport {createLogger} from '../util/logger';\nimport type {FileFilterCreatorFn} from '../util/file-filter';\nimport {\n  createFileFilter as defaultFileFilterCreator,\n} from '../util/file-filter';\nimport defaultSourceWatcher from '../watcher';\nimport type {OnSourceChangeFn} from '../watcher';\n\n\nconst log = createLogger(__filename);\n\nexport type ExtensionRunnerConfig = {|\n  target: 'firefox-desktop',\n  params: FirefoxDesktopExtensionRunnerParams,\n|} | {|\n  target: 'firefox-android',\n  params: FirefoxAndroidExtensionRunnerParams,\n|};\n\nexport type MultiExtensionRunnerParams = {|\n  runners: Array<IExtensionRunner>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n|};\n\nexport async function createExtensionRunner(config: ExtensionRunnerConfig) {\n  switch (config.target) {\n    case 'firefox-desktop': {\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      const {FirefoxDesktopExtensionRunner} = require('./firefox-desktop');\n      return new FirefoxDesktopExtensionRunner(config.params);\n    }\n    case 'firefox-android': {\n      // TODO: use async import instead of require - https://github.com/mozilla/web-ext/issues/1306\n      const {FirefoxAndroidExtensionRunner} = require('./firefox-android');\n      return new FirefoxAndroidExtensionRunner(config.params);\n    }\n    default:\n      throw new WebExtError(`Unknown target: \"${config.target}\"`);\n  }\n}\n\n/**\n * Implements an IExtensionRunner which allow the caller to\n * manage multiple extension runners at the same time (e.g. by running\n * a Firefox Desktop instance alongside to a Firefox for Android instance).\n */\nexport class MultiExtensionRunner {\n  extensionRunners: Array<IExtensionRunner>;\n  desktopNotifications: typeof defaultDesktopNotifications;\n\n  constructor(params: MultiExtensionRunnerParams) {\n    this.extensionRunners = params.runners;\n    this.desktopNotifications = params.desktopNotifications;\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Multi Extension Runner';\n  }\n\n  /**\n   * Call the `run` method on all the managed extension runners,\n   * and awaits that all the runners has been successfully started.\n   */\n  async run(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.run());\n    }\n\n    await Promise.all(promises);\n  }\n\n  /**\n   * Reloads all the extensions on all the managed extension runners,\n   * collect any reload error, and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug('Reloading all reloadable add-ons');\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadAllExtensions().then(\n        () => {\n          return {runnerName: runner.getName()};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Reloads a single extension on all the managed extension runners,\n   * collect any reload error and resolves to an array composed by\n   * a ExtensionRunnerReloadResult object per managed runner.\n   *\n   * Any detected reload error is also logged on the terminal and shows as a\n   * desktop notification.\n   */\n  async reloadExtensionBySourceDir(\n    sourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    log.debug(`Reloading add-on at ${sourceDir}`);\n\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      const reloadPromise = runner.reloadExtensionBySourceDir(sourceDir).then(\n        () => {\n          return {runnerName: runner.getName(), sourceDir};\n        },\n        (error) => {\n          return {\n            runnerName: runner.getName(),\n            reloadError: error,\n            sourceDir,\n          };\n        }\n      );\n\n      promises.push(reloadPromise);\n    }\n\n    // $FLOW_FIXME: When upgrading to Flow 0.61.0, it could not follow the type of sourceDir in the array of promises.\n    return await Promise.all(promises).then((results) => {\n      this.handleReloadResults(results);\n      return results;\n    });\n  }\n\n  /**\n   * Register a callback to be called when all the managed runners has been exited.\n   */\n  registerCleanup(cleanupCallback: Function): void {\n    const promises = [];\n\n    // Create a promise for every extension runner managed by this instance,\n    // the promise will be resolved when the particular runner calls its\n    // registered cleanup callbacks.\n    for (const runner of this.extensionRunners) {\n      promises.push(new Promise((resolve) => {\n        runner.registerCleanup(resolve);\n      }));\n    }\n\n    // Wait for all the created promises to be resolved or rejected\n    // (once each one of the runners has cleaned up) and then call\n    // the cleanup callback registered to this runner.\n    Promise.all(promises).then(cleanupCallback, cleanupCallback);\n  }\n\n  /**\n   * Exits all the managed runner has been exited.\n   */\n  async exit(): Promise<void> {\n    const promises = [];\n    for (const runner of this.extensionRunners) {\n      promises.push(runner.exit());\n    }\n\n    await Promise.all(promises);\n  }\n\n  // Private helper methods.\n\n  handleReloadResults(results: Array<ExtensionRunnerReloadResult>): void {\n    for (const {runnerName, reloadError, sourceDir} of results) {\n      if (reloadError instanceof Error) {\n        let message = 'Error occurred while reloading';\n        if (sourceDir) {\n          message += ` \"${sourceDir}\" `;\n        }\n\n        message += `on \"${runnerName}\" - ${reloadError.message}`;\n\n        log.error(`\\n${message}`);\n        log.debug(reloadError.stack);\n\n        this.desktopNotifications({\n          title: 'web-ext run: extension reload error',\n          message,\n        });\n      }\n    }\n  }\n}\n\n// defaultWatcherCreator types and implementation.\n\nexport type WatcherCreatorParams = {|\n  reloadExtension: (string) => void,\n  sourceDir: string,\n  artifactsDir: string,\n  onSourceChange?: OnSourceChangeFn,\n  ignoreFiles?: Array<string>,\n  createFileFilter?: FileFilterCreatorFn,\n|};\n\nexport type WatcherCreatorFn = (params: WatcherCreatorParams) => Watchpack;\n\nexport function defaultWatcherCreator(\n  {\n    reloadExtension, sourceDir, artifactsDir, ignoreFiles,\n    onSourceChange = defaultSourceWatcher,\n    createFileFilter = defaultFileFilterCreator,\n  }: WatcherCreatorParams\n): Watchpack {\n  const fileFilter = createFileFilter(\n    {sourceDir, artifactsDir, ignoreFiles}\n  );\n  return onSourceChange({\n    sourceDir,\n    artifactsDir,\n    onChange: () => reloadExtension(sourceDir),\n    shouldWatchFile: (file) => fileFilter.wantFile(file),\n  });\n}\n\n\n// defaultReloadStrategy types and implementation.\n\nexport type ReloadStrategyParams = {|\n  extensionRunner: IExtensionRunner,\n  sourceDir: string,\n  artifactsDir: string,\n  ignoreFiles?: Array<string>,\n  noInput?: boolean,\n|};\n\nexport type ReloadStrategyOptions = {|\n  createWatcher?: WatcherCreatorFn,\n  stdin?: stream$Readable,\n  kill?: typeof process.kill,\n|};\n\nexport function defaultReloadStrategy(\n  {\n    artifactsDir,\n    extensionRunner,\n    ignoreFiles,\n    noInput = false,\n    sourceDir,\n  }: ReloadStrategyParams,\n  {\n    createWatcher = defaultWatcherCreator,\n    stdin = process.stdin,\n    kill = process.kill,\n  }: ReloadStrategyOptions = {}\n): void {\n  const allowInput = !noInput;\n  if (!allowInput) {\n    log.debug('Input has been disabled because of noInput==true');\n  }\n\n  const watcher: Watchpack = createWatcher({\n    reloadExtension: (watchedSourceDir) => {\n      extensionRunner.reloadExtensionBySourceDir(watchedSourceDir);\n    },\n    sourceDir,\n    artifactsDir,\n    ignoreFiles,\n  });\n\n  extensionRunner.registerCleanup(() => {\n    watcher.close();\n    if (allowInput) {\n      stdin.pause();\n    }\n  });\n\n  if (allowInput && stdin instanceof tty.ReadStream && stdin.isTTY) {\n    readline.emitKeypressEvents(stdin);\n    stdin.setRawMode(true);\n\n    const keypressUsageInfo = 'Press R to reload (and Ctrl-C to quit)';\n\n    // NOTE: this `Promise.resolve().then(...)` is basically used to spawn a \"co-routine\"\n    // that is executed before the callback attached to the Promise returned by this function\n    // (and it allows the `run` function to not be stuck in the while loop).\n    Promise.resolve().then(async function() {\n      log.info(keypressUsageInfo);\n\n      let userExit = false;\n\n      while (!userExit) {\n        const keyPressed = await new Promise((resolve) => {\n          stdin.once('keypress', (str, key) => resolve(key));\n        });\n\n        if (keyPressed.ctrl && keyPressed.name === 'c') {\n          userExit = true;\n        } else if (keyPressed.name === 'z') {\n          // Prepare to suspend.\n\n          // NOTE: Switch the raw mode off before suspending (needed to make the keypress event\n          // to work correctly when the nodejs process is resumed).\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(false);\n          }\n\n          log.info('\\nweb-ext has been suspended on user request');\n          kill(process.pid, 'SIGTSTP');\n\n          // Prepare to resume.\n\n          log.info(`\\nweb-ext has been resumed. ${keypressUsageInfo}`);\n          // Switch the raw mode on on resume.\n          if (stdin instanceof tty.ReadStream) {\n            stdin.setRawMode(true);\n          }\n        } else if (keyPressed.name === 'r') {\n          log.debug('Reloading installed extensions on user request');\n          extensionRunner.reloadAllExtensions();\n        }\n      }\n\n      log.info('\\nExiting web-ext on user request');\n      extensionRunner.exit();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/index.js","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Desktop instance.\n */\n\n// Import flow types from npm dependencies.\nimport type FirefoxProfile from 'firefox-profile';\n\nimport {\n  MultiExtensionsReloadError,\n  RemoteTempInstallNotSupported,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\n// Import flow types from project files.\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {FirefoxPreferences} from '../firefox/preferences';\nimport type {FirefoxInfo} from '../firefox/index'; // eslint-disable-line import/named\n\ntype FirefoxDesktopSpecificRunnerParams = {|\n  customPrefs?: FirefoxPreferences,\n  browserConsole: boolean,\n  firefoxBinary: string,\n  preInstall: boolean,\n\n  // Firefox desktop injected dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n|};\n\nexport type FirefoxDesktopExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n  // Firefox desktop CLI params.\n  ...FirefoxDesktopSpecificRunnerParams,\n|};\n\nconst log = createLogger(__filename);\n\n/**\n * Implements an IExtensionRunner which manages a Firefox Desktop instance.\n */\nexport class FirefoxDesktopExtensionRunner {\n  cleanupCallbacks: Set<Function>;\n  params: FirefoxDesktopExtensionRunnerParams;\n  profile: FirefoxProfile;\n  // Map extensions sourceDir to their related addon ids.\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n  runningInfo: FirefoxInfo;\n\n  constructor(params: FirefoxDesktopExtensionRunnerParams) {\n    this.params = params;\n\n    this.reloadableExtensions = new Map();\n    this.cleanupCallbacks = new Set();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Desktop';\n  }\n\n  /**\n   * Setup the Firefox Profile and run a Firefox Desktop instance.\n   */\n  async run(): Promise<void> {\n    // Get a firefox profile with the custom Prefs set (a new or a cloned one).\n    // Pre-install extensions as proxy if needed (and disable auto-reload if you do)\n    await this.setupProfileDir();\n\n    // (if reload is enabled):\n    // - Connect to the firefox instance on RDP\n    // - Install any extension if needed (if not installed as proxy)\n    // - Keep track of the extension id assigned in a map with the sourceDir as a key\n    await this.startFirefoxInstance();\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n          `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    if (!this.runningInfo || !this.runningInfo.firefox) {\n      throw new WebExtError('No firefox instance is currently running');\n    }\n\n    this.runningInfo.firefox.kill();\n  }\n\n  // Private helper methods.\n\n  async setupProfileDir() {\n    const {\n      customPrefs,\n      extensions,\n      keepProfileChanges,\n      preInstall,\n      profilePath,\n      firefoxApp,\n    } = this.params;\n\n    if (profilePath) {\n      if (keepProfileChanges) {\n        log.debug(`Using Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.useProfile(profilePath, {customPrefs});\n      } else {\n        log.debug(`Copying Firefox profile from ${profilePath}`);\n        this.profile = await firefoxApp.copyProfile(profilePath, {customPrefs});\n      }\n    } else {\n      log.debug('Creating new Firefox profile');\n      this.profile = await firefoxApp.createProfile({customPrefs});\n    }\n\n    // preInstall the extensions if needed.\n    if (preInstall) {\n      for (const extension of extensions) {\n        await firefoxApp.installExtension({\n          asProxy: true,\n          extensionPath: extension.sourceDir,\n          manifestData: extension.manifestData,\n          profile: this.profile,\n        });\n      }\n    }\n  }\n\n  async startFirefoxInstance() {\n    const {\n      browserConsole,\n      extensions,\n      firefoxBinary,\n      preInstall,\n      startUrl,\n      firefoxApp,\n      firefoxClient,\n    } = this.params;\n\n    const binaryArgs = [];\n\n    if (browserConsole) {\n      binaryArgs.push('-jsconsole');\n    }\n    if (startUrl) {\n      const urls = Array.isArray(startUrl) ? startUrl : [startUrl];\n      for (const url of urls) {\n        binaryArgs.push('--url', url);\n      }\n    }\n\n    this.runningInfo = await firefoxApp.run(this.profile, {\n      firefoxBinary, binaryArgs,\n    });\n\n    this.runningInfo.firefox.on('close', () => {\n      for (const cleanupCb of this.cleanupCallbacks) {\n        try {\n          cleanupCb();\n        } catch (error) {\n          log.error(`Exception on executing cleanup callback: ${error}`);\n        }\n      }\n    });\n\n    if (!preInstall) {\n      const remoteFirefox = this.remoteFirefox = await firefoxClient({\n        port: this.runningInfo.debuggerPort,\n      });\n\n      // Install all the temporary addons.\n      for (const extension of extensions) {\n        try {\n          const addonId = await (\n            remoteFirefox.installTemporaryAddon(extension.sourceDir)\n              .then((installResult: FirefoxRDPResponseAddon) => {\n                return installResult.addon.id;\n              })\n          );\n\n          if (!addonId) {\n            throw new WebExtError(\n              'Unexpected missing addonId in the installAsTemporaryAddon result'\n            );\n          }\n\n          this.reloadableExtensions.set(extension.sourceDir, addonId);\n        } catch (error) {\n          if (error instanceof RemoteTempInstallNotSupported) {\n            log.debug(`Caught: ${error}`);\n            throw new WebExtError(\n              'Temporary add-on installation is not supported in this version' +\n              ' of Firefox (you need Firefox 49 or higher). For older Firefox' +\n              ' versions, use --pre-install'\n            );\n          } else {\n            throw error;\n          }\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-desktop.js","/* @flow */\n\n/**\n * This module provide an ExtensionRunner subclass that manage an extension executed\n * in a Firefox for Android instance.\n */\n\nimport net from 'net';\nimport path from 'path';\nimport readline from 'readline';\nimport tty from 'tty';\n\nimport {withTempDir} from '../util/temp-dir';\nimport DefaultADBUtils from '../util/adb';\nimport {\n  showDesktopNotification as defaultDesktopNotifications,\n} from '../util/desktop-notifier';\nimport {\n  MultiExtensionsReloadError,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport * as defaultFirefoxApp from '../firefox';\nimport {\n  connectWithMaxRetries as defaultFirefoxConnector,\n} from '../firefox/remote';\nimport {createLogger} from '../util/logger';\nimport type {\n  ExtensionRunnerParams,\n  ExtensionRunnerReloadResult,\n} from './base';\nimport type {\n  FirefoxPreferences,\n} from '../firefox/preferences';\nimport type {\n  FirefoxRDPResponseAddon,\n  RemoteFirefox,\n} from '../firefox/remote';\nimport type {\n  ExtensionBuildResult,\n} from '../cmd/build';\n\nconst log = createLogger(__filename);\n\nexport type FirefoxAndroidExtensionRunnerParams = {|\n  ...ExtensionRunnerParams,\n\n  // Firefox specific.\n  customPrefs?: FirefoxPreferences,\n\n  // Not supported (currently ignored with logged warning).\n  preInstall?: boolean,\n  browserConsole?: boolean,\n\n  // Firefox android injected dependencies.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n  firefoxApk?: string,\n  firefoxAndroidTimeout?: number,\n\n  // Injected Dependencies.\n  firefoxApp: typeof defaultFirefoxApp,\n  firefoxClient: typeof defaultFirefoxConnector,\n  ADBUtils?: typeof DefaultADBUtils,\n  buildSourceDir: (string, string) => Promise<ExtensionBuildResult>,\n  desktopNotifications: typeof defaultDesktopNotifications,\n  stdin?: stream$Readable,\n|};\n\n/**\n * Implements an IExtensionRunner which manages a Firefox for Android instance.\n */\nexport class FirefoxAndroidExtensionRunner {\n  // Wait 3s before the next unix socket discovery loop.\n  static unixSocketDiscoveryRetryInterval = 3 * 1000;\n  // Wait for at most 3 minutes before giving up.\n  static unixSocketDiscoveryMaxTime = 3 * 60 * 1000;\n\n  params: FirefoxAndroidExtensionRunnerParams;\n  adbUtils: DefaultADBUtils;\n  exiting: boolean;\n  selectedAdbDevice: string;\n  selectedFirefoxApk: string;\n  selectedArtifactsDir: string;\n  selectedRDPSocketFile: string;\n  selectedTCPPort: number;\n  cleanupCallbacks: Set<Function>;\n  adbExtensionsPathBySourceDir: Map<string, string>;\n  reloadableExtensions: Map<string, string>;\n  remoteFirefox: RemoteFirefox;\n\n  constructor(params: FirefoxAndroidExtensionRunnerParams) {\n    this.params = params;\n    this.cleanupCallbacks = new Set();\n    this.adbExtensionsPathBySourceDir = new Map();\n    this.reloadableExtensions = new Map();\n\n    // Print warning for not currently supported options (e.g. preInstall,\n    // cloned profiles, browser console).\n    this.printIgnoredParamsWarnings();\n  }\n\n  async run(): Promise<void> {\n    const {\n      adbBin,\n      adbHost,\n      adbPort,\n      ADBUtils = DefaultADBUtils,\n    } = this.params;\n\n    this.adbUtils = new ADBUtils({\n      adbBin, adbHost, adbPort,\n    });\n\n    await this.adbDevicesDiscoveryAndSelect();\n    await this.apkPackagesDiscoveryAndSelect();\n    await this.adbCheckRuntimePermissions();\n    await this.adbForceStopSelectedPackage();\n\n    // Create profile prefs (with enabled remote RDP server), prepare the\n    // artifacts and temporary directory on the selected device, and\n    // push the profile preferences to the remote profile dir.\n    await this.adbPrepareProfileDir();\n\n    // NOTE: running Firefox for Android on the Android Emulator can be\n    // pretty slow, we can run the following 3 steps in parallel to speed up\n    // it a bit.\n    await Promise.all([\n      // Start Firefox for Android instance on the created profile.\n      this.adbStartSelectedPackage(),\n\n      // Build and push to devices all the extension xpis\n      // and keep track of the xpi built and uploaded by extension sourceDir.\n      this.buildAndPushExtensions(),\n\n      // Wait for RDP unix socket file created and\n      // Create an ADB forward connection on a free tcp port\n      this.adbDiscoveryAndForwardRDPUnixSocket(),\n    ]);\n\n    // Connect to RDP socket on the local tcp server, install all the pushed extension\n    // and keep track of the built and installed extension by extension sourceDir.\n    await this.rdpInstallExtensions();\n  }\n\n  // Method exported from the IExtensionRunner interface.\n\n  /**\n   * Returns the runner name.\n   */\n  getName() {\n    return 'Firefox Android';\n  }\n\n  /**\n   * Reloads all the extensions, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadAllExtensions(): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const reloadErrors = new Map();\n\n    for (const {sourceDir} of this.params.extensions) {\n      const [res] = await this.reloadExtensionBySourceDir(sourceDir);\n      if (res.reloadError instanceof Error) {\n        reloadErrors.set(sourceDir, res.reloadError);\n      }\n    }\n\n    if (reloadErrors.size > 0) {\n      return [{\n        runnerName,\n        reloadError: new MultiExtensionsReloadError(reloadErrors),\n      }];\n    }\n\n    return [{runnerName}];\n  }\n\n  /**\n   * Reloads a single extension, collect any reload error and resolves to\n   * an array composed by a single ExtensionRunnerReloadResult object.\n   */\n  async reloadExtensionBySourceDir(\n    extensionSourceDir: string\n  ): Promise<Array<ExtensionRunnerReloadResult>> {\n    const runnerName = this.getName();\n    const addonId = this.reloadableExtensions.get(extensionSourceDir);\n\n    if (!addonId) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: new WebExtError(\n          'Extension not reloadable: ' +\n            `no addonId has been mapped to \"${extensionSourceDir}\"`\n        ),\n        runnerName,\n      }];\n    }\n\n    try {\n      await this.buildAndPushExtension(extensionSourceDir);\n      await this.remoteFirefox.reloadAddon(addonId);\n    } catch (error) {\n      return [{\n        sourceDir: extensionSourceDir,\n        reloadError: error,\n        runnerName,\n      }];\n    }\n\n    return [{runnerName, sourceDir: extensionSourceDir}];\n  }\n\n  /**\n   * Register a callback to be called when the runner has been exited\n   * (e.g. the Firefox instance exits or the user has requested web-ext\n   * to exit).\n   */\n  registerCleanup(fn: Function): void {\n    this.cleanupCallbacks.add(fn);\n  }\n\n  /**\n   * Exits the runner, by closing the managed Firefox instance.\n   */\n  async exit(): Promise<void> {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n    } = this;\n\n    this.exiting = true;\n\n    // If a Firefox for Android instance has been started,\n    // we should ensure that it has been stopped when we exit.\n    await this.adbForceStopSelectedPackage();\n\n    if (selectedArtifactsDir) {\n      log.debug('Cleaning up artifacts directory on the Android device...');\n      await adbUtils.clearArtifactsDir(selectedAdbDevice);\n    }\n\n    // Call all the registered cleanup callbacks.\n    for (const fn of this.cleanupCallbacks) {\n      try {\n        fn();\n      } catch (error) {\n        log.error(error);\n      }\n    }\n  }\n\n  // Private helper methods.\n\n  getDeviceProfileDir(): string {\n    return `${this.selectedArtifactsDir}/profile`;\n  }\n\n  printIgnoredParamsWarnings() {\n    if (this.params.profilePath) {\n      log.warn(\n        'Firefox for Android target does not support custom profile paths.'\n      );\n    }\n\n    if (this.params.keepProfileChanges) {\n      log.warn(\n        'Firefox for Android target does not support --keep-profile-changes.'\n      );\n    }\n\n    if (this.params.browserConsole) {\n      log.warn(\n        'Firefox for Android target does not support --browser-console option.'\n      );\n    }\n\n    if (this.params.preInstall) {\n      log.warn(\n        'Firefox for Android target does not support --pre-install option.'\n      );\n    }\n\n    if (this.params.startUrl) {\n      log.warn(\n        'Firefox for Android target does not support --start-url option.'\n      );\n    }\n  }\n\n  async adbDevicesDiscoveryAndSelect() {\n    const {adbUtils} = this;\n    const {adbDevice} = this.params;\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await adbUtils.discoverDevices();\n\n    if (devices.length === 0) {\n      throw new UsageError(\n        'No Android device found through ADB. ' +\n        'Make sure the device is connected and USB debugging is enabled.'\n      );\n    }\n\n    if (!adbDevice) {\n      const devicesMsg = devices.map((dev) => ` - ${dev}`).join('\\n');\n      log.info(`\\nAndroid devices found:\\n${devicesMsg}`);\n      throw new UsageError(\n        'Select an android device using --android-device=<name>');\n    }\n\n    const foundDevices = devices.filter((device) => {\n      return device === adbDevice;\n    });\n\n    if (foundDevices.length === 0) {\n      const devicesMsg = JSON.stringify(devices);\n      throw new UsageError(\n        `Android device ${adbDevice} was not found in list: ${devicesMsg}`);\n    }\n\n    this.selectedAdbDevice = foundDevices[0];\n    log.info(`Selected ADB device: ${this.selectedAdbDevice}`);\n  }\n\n  async apkPackagesDiscoveryAndSelect() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      params: {\n        firefoxApk,\n      },\n    } = this;\n    // Discovery and select a Firefox for Android version.\n    const packages = await adbUtils.discoverInstalledFirefoxAPKs(\n      selectedAdbDevice,\n      firefoxApk\n    );\n\n    if (packages.length === 0) {\n      throw new UsageError(\n        'No Firefox packages were found on the selected Android device');\n    }\n\n    const pkgsListMsg = (pkgs) => {\n      return pkgs.map((pkg) => ` - ${ pkg}`).join('\\n');\n    };\n\n    if (!firefoxApk) {\n      log.info(`\\nPackages found:\\n${pkgsListMsg(packages)}`);\n\n      if (packages.length > 1) {\n        throw new UsageError('Select one of the packages using --firefox-apk');\n      }\n\n      // If only one APK has been found, select it even if it has not been\n      // specified explicitly on the comment line.\n      this.selectedFirefoxApk = packages[0];\n      log.info(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n      return;\n    }\n\n    const filteredPackages = packages.filter((line) => line === firefoxApk);\n\n    if (filteredPackages.length === 0) {\n      const pkgsList = pkgsListMsg(filteredPackages);\n      throw new UsageError(\n        `Package ${firefoxApk} was not found in list: ${pkgsList}`\n      );\n    }\n\n    this.selectedFirefoxApk = filteredPackages[0];\n    log.debug(`Selected Firefox for Android APK: ${this.selectedFirefoxApk}`);\n  }\n\n  async adbForceStopSelectedPackage() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.info(`Stopping existing instances of ${selectedFirefoxApk}...`);\n    await adbUtils.amForceStopAPK(selectedAdbDevice, selectedFirefoxApk);\n  }\n\n  async adbCheckRuntimePermissions() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n    } = this;\n\n    log.debug(`Discovering Android version for ${selectedAdbDevice}...`);\n\n    const androidVersion = await adbUtils.getAndroidVersionNumber(\n      selectedAdbDevice\n    );\n\n    if (typeof androidVersion !== 'number' || Number.isNaN(androidVersion)) {\n      throw new WebExtError(`Invalid Android version: ${androidVersion}`);\n    }\n\n    log.debug(`Detected Android version ${androidVersion}`);\n\n    if (androidVersion < 23) {\n      return;\n    }\n\n    log.debug('Checking read/write permissions needed for web-ext' +\n              `on ${selectedFirefoxApk}...`);\n\n    // Runtime permission needed to be able to run Firefox on a temporarily created profile\n    // on android versions >= 23 (Android Marshmallow, which is the first version where\n    // these permissions are optional and have to be granted explicitly).\n    await adbUtils.ensureRequiredAPKRuntimePermissions(\n      selectedAdbDevice, selectedFirefoxApk, [\n        'android.permission.READ_EXTERNAL_STORAGE',\n        'android.permission.WRITE_EXTERNAL_STORAGE',\n      ]\n    );\n  }\n\n  async adbPrepareProfileDir() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxApp,\n      },\n    } = this;\n    // Create the preferences file and the Fennec temporary profile.\n    log.debug(`Preparing a temporary profile for ${selectedFirefoxApk}...`);\n\n    const profile = await firefoxApp.createProfile({app: 'fennec'});\n\n    // Choose a artifacts dir name for the assets pushed to the\n    // Android device.\n    this.selectedArtifactsDir = await adbUtils.getOrCreateArtifactsDir(\n      selectedAdbDevice\n    );\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    await adbUtils.runShellCommand(selectedAdbDevice, [\n      'mkdir', '-p', deviceProfileDir,\n    ]);\n    await adbUtils.pushFile(selectedAdbDevice,\n                            path.join(profile.profileDir, 'user.js'),\n                            `${deviceProfileDir}/user.js`);\n\n    log.debug(`Created temporary profile at ${deviceProfileDir}.`);\n  }\n\n  async adbStartSelectedPackage() {\n    const {\n      adbUtils,\n      selectedFirefoxApk,\n      selectedAdbDevice,\n    } = this;\n\n    const deviceProfileDir = this.getDeviceProfileDir();\n\n    log.info(`Starting ${selectedFirefoxApk}...`);\n\n    log.debug(`Using profile ${deviceProfileDir}`);\n\n    await adbUtils.startFirefoxAPK(\n      selectedAdbDevice, selectedFirefoxApk, deviceProfileDir\n    );\n  }\n\n  async buildAndPushExtension(sourceDir: string) {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedArtifactsDir,\n      params: {\n        buildSourceDir,\n      },\n    } = this;\n\n    await withTempDir(async (tmpDir) => {\n      const {extensionPath} = await buildSourceDir(sourceDir, tmpDir.path());\n\n      const extFileName = path.basename(extensionPath, '.zip');\n\n      let adbExtensionPath = this.adbExtensionsPathBySourceDir.get(sourceDir);\n\n      if (!adbExtensionPath) {\n        adbExtensionPath = `${selectedArtifactsDir}/${extFileName}.xpi`;\n      }\n\n      log.debug(`Uploading ${extFileName} on the android device`);\n\n      await adbUtils.pushFile(\n        selectedAdbDevice, extensionPath, adbExtensionPath\n      );\n\n      log.debug(`Upload completed: ${adbExtensionPath}`);\n\n      this.adbExtensionsPathBySourceDir.set(sourceDir, adbExtensionPath);\n    });\n  }\n\n  async buildAndPushExtensions() {\n    for (const {sourceDir} of this.params.extensions) {\n      await this.buildAndPushExtension(sourceDir);\n    }\n  }\n\n  async adbDiscoveryAndForwardRDPUnixSocket() {\n    const {\n      adbUtils,\n      selectedAdbDevice,\n      selectedFirefoxApk,\n      params: {\n        firefoxAndroidTimeout,\n      },\n    } = this;\n\n    const stdin = this.params.stdin || process.stdin;\n\n    const {\n      unixSocketDiscoveryRetryInterval,\n    } = FirefoxAndroidExtensionRunner;\n\n    let {\n      unixSocketDiscoveryMaxTime,\n    } = FirefoxAndroidExtensionRunner;\n\n    if (typeof firefoxAndroidTimeout === 'number') {\n      unixSocketDiscoveryMaxTime = firefoxAndroidTimeout;\n    }\n\n    const handleCtrlC = (str, key) => {\n      if (key.ctrl && key.name === 'c') {\n        adbUtils.setUserAbortDiscovery(true);\n      }\n    };\n\n    // TODO: use noInput property to decide if we should\n    // disable direct keypress handling.\n    if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n      readline.emitKeypressEvents(stdin);\n      stdin.setRawMode(true);\n\n      stdin.on('keypress', handleCtrlC);\n    }\n\n    try {\n      // Got a debugger socket file to connect.\n      this.selectedRDPSocketFile = (\n        await adbUtils.discoverRDPUnixSocket(\n          selectedAdbDevice, selectedFirefoxApk, {\n            maxDiscoveryTime: unixSocketDiscoveryMaxTime,\n            retryInterval: unixSocketDiscoveryRetryInterval,\n          }\n        )\n      );\n    } finally {\n      if (stdin.isTTY && stdin instanceof tty.ReadStream) {\n        stdin.removeListener('keypress', handleCtrlC);\n      }\n    }\n\n    log.debug(`RDP Socket File selected: ${this.selectedRDPSocketFile}`);\n\n    const tcpPort = await this.chooseLocalTcpPort();\n\n    // Log the choosen tcp port at info level (useful to the user to be able\n    // to connect the Firefox DevTools to the Firefox for Android instance).\n    log.info(`You can connect to this Android device on TCP port ${tcpPort}`);\n\n    await adbUtils.setupForward(\n      selectedAdbDevice,\n      `localfilesystem:${this.selectedRDPSocketFile}`,\n      `tcp:${tcpPort}`\n    );\n\n    this.selectedTCPPort = tcpPort;\n  }\n\n  chooseLocalTcpPort(): Promise<number> {\n    return new Promise((resolve) => {\n      const srv = net.createServer();\n      // $FLOW_FIXME: flow has his own opinions on this method signature.\n      srv.listen(0, () => {\n        const freeTcpPort = srv.address().port;\n        srv.close();\n        resolve(freeTcpPort);\n      });\n    });\n  }\n\n  async rdpInstallExtensions() {\n    const {\n      selectedTCPPort,\n      params: {\n        extensions,\n        firefoxClient,\n      },\n    } = this;\n\n    const remoteFirefox = this.remoteFirefox = await firefoxClient({\n      port: selectedTCPPort,\n    });\n\n    // Exit and cleanup the extension runner if the connection to the\n    // remote Firefox for Android instance has been closed.\n    remoteFirefox.client.on('end', () => {\n      if (!this.exiting) {\n        log.info('Exiting the device because Firefox for Android disconnected');\n        this.exit();\n      }\n    });\n\n    // Install all the temporary addons.\n    for (const extension of extensions) {\n      const {sourceDir} = extension;\n      const adbExtensionPath = this.adbExtensionsPathBySourceDir.get(\n        sourceDir\n      );\n\n      if (!adbExtensionPath) {\n        throw new WebExtError(\n          `ADB extension path for \"${sourceDir}\" was unexpectedly empty`\n        );\n      }\n\n      const addonId = await (\n        remoteFirefox.installTemporaryAddon(adbExtensionPath)\n          .then((installResult: FirefoxRDPResponseAddon) => {\n            return installResult.addon.id;\n          })\n      );\n\n      if (!addonId) {\n        throw new WebExtError(\n          'Received an empty addonId from ' +\n          `remoteFirefox.installTemporaryAddon(\"${adbExtensionPath}\")`\n        );\n      }\n\n      this.reloadableExtensions.set(extension.sourceDir, addonId);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extension-runners/firefox-android.js","module.exports = require(\"tmp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tmp\"\n// module id = 192\n// module chunks = 0","/* @flow */\nimport defaultADB from 'adbkit';\n\nimport {\n  isErrorWithCode,\n  UsageError,\n  WebExtError,\n} from '../errors';\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\nexport type ADBUtilsParams = {|\n  adb?: typeof defaultADB,\n  // ADB configs.\n  adbBin?: string,\n  adbHost?: string,\n  adbPort?: string,\n  adbDevice?: string,\n|};\n\nexport type DiscoveryParams = {|\n  maxDiscoveryTime: number,\n  retryInterval: number,\n|};\n\n// Helper function used to raise an UsageError when the adb binary has not been found.\nasync function wrapADBCall(asyncFn: (...any) => Promise<any>): Promise<any> {\n  try {\n    return await asyncFn();\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error) &&\n        error.message.includes('spawn adb')) {\n      throw new UsageError(\n        'No adb executable has been found. ' +\n          'You can Use --adb-bin, --adb-host/--adb-port ' +\n          'to configure it manually if needed.');\n    }\n\n    throw error;\n  }\n}\n\nexport default class ADBUtils {\n  params: ADBUtilsParams;\n  adb: typeof defaultADB;\n  adbClient: any; // TODO: better flow typing here.\n\n  // Map<deviceId -> artifactsDir>\n  artifactsDirMap: Map<string, string>;\n  // Toggled when the user wants to abort the RDP Unix Socket discovery loop\n  // while it is still executing.\n  userAbortDiscovery: boolean;\n\n  constructor(params: ADBUtilsParams) {\n    this.params = params;\n\n    const {\n      adb,\n      adbBin,\n      adbHost,\n      adbPort,\n    } = params;\n\n    this.adb = adb || defaultADB;\n\n    this.adbClient = this.adb.createClient({\n      bin: adbBin,\n      host: adbHost,\n      port: adbPort,\n    });\n\n    this.artifactsDirMap = new Map();\n\n    this.userAbortDiscovery = false;\n  }\n\n  runShellCommand(\n    deviceId: string, cmd: string | Array<string>\n  ): Promise<string> {\n    const {adb, adbClient} = this;\n\n    log.debug(`Run adb shell command on ${deviceId}: ${JSON.stringify(cmd)}`);\n\n    return wrapADBCall(async () => {\n      return await adbClient.shell(deviceId, cmd).then(adb.util.readAll);\n    }).then((res) => res.toString());\n  }\n\n  async discoverDevices(): Promise<Array<string>> {\n    const {adbClient} = this;\n\n    let devices = [];\n\n    log.debug('Listing android devices');\n    devices = await wrapADBCall(async () => adbClient.listDevices());\n\n    return devices.map((dev) => dev.id);\n  }\n\n  async discoverInstalledFirefoxAPKs(\n    deviceId: string,\n    firefoxApk?: string\n  ): Promise<Array<string>> {\n    log.debug(`Listing installed Firefox APKs on ${deviceId}`);\n\n    const pmList = await this.runShellCommand(deviceId, [\n      'pm', 'list', 'packages',\n    ]);\n\n    return pmList.split('\\n')\n      .map((line) => line.replace('package:', '').trim())\n      .filter((line) => {\n        // Look for an exact match if firefoxApk is defined.\n        if (firefoxApk) {\n          return line === firefoxApk;\n        }\n        // Match any package name that starts with the package name of a Firefox for Android browser.\n        return (\n          line.startsWith('org.mozilla.fennec') ||\n            line.startsWith('org.mozilla.firefox')\n        );\n      });\n  }\n\n  async getAndroidVersionNumber(deviceId: string): Promise<number> {\n    const androidVersion = (await this.runShellCommand(deviceId, [\n      'getprop', 'ro.build.version.sdk',\n    ])).trim();\n\n    const androidVersionNumber = parseInt(androidVersion);\n\n    // No need to check the granted runtime permissions on Android versions < Lollypop.\n    if (isNaN(androidVersionNumber)) {\n      throw new WebExtError(\n        'Unable to discovery android version on ' +\n        `${deviceId}: ${androidVersion}`\n      );\n    }\n\n    return androidVersionNumber;\n  }\n\n  // Raise an UsageError when the given APK does not have the required runtime permissions.\n  async ensureRequiredAPKRuntimePermissions(\n    deviceId: string, apk: string, permissions: Array<string>\n  ): Promise<void> {\n    const permissionsMap = {};\n\n    // Initialize every permission to false in the permissions map.\n    for (const perm of permissions) {\n      permissionsMap[perm] = false;\n    }\n\n    // Retrieve the permissions information for the given apk.\n    const pmDumpLogs = (await this.runShellCommand(deviceId, [\n      'pm', 'dump', apk,\n    ])).split('\\n');\n\n    // Set to true the required permissions that have been granted.\n    for (const line of pmDumpLogs) {\n      for (const perm of permissions) {\n        if (line.includes(`${perm}: granted=true`)) {\n          permissionsMap[perm] = true;\n        }\n      }\n    }\n\n    for (const perm of permissions) {\n      if (!permissionsMap[perm]) {\n        throw new UsageError(\n          `Required ${perm} has not be granted for ${apk}. ` +\n          'Please grant them using the Android Settings ' +\n          'or using the following adb command:\\n' +\n          `\\t adb shell pm grant ${apk} ${perm}\\n`\n        );\n      }\n    }\n  }\n\n  async amForceStopAPK(deviceId: string, apk: string): Promise<void> {\n    await this.runShellCommand(deviceId, [\n      'am', 'force-stop', apk,\n    ]);\n  }\n\n  async getOrCreateArtifactsDir(deviceId: string): Promise<string> {\n    let artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (artifactsDir) {\n      return artifactsDir;\n    }\n\n    artifactsDir = `/sdcard/web-ext-artifacts-${Date.now()}`;\n\n    const testDirOut = (await this.runShellCommand(\n      deviceId, `test -d ${artifactsDir} ; echo $?`\n    )).trim();\n\n    if (testDirOut !== '1') {\n      throw new WebExtError(\n        `Cannot create artifacts directory ${artifactsDir} ` +\n        `because it exists on ${deviceId}.`\n      );\n    }\n\n    await this.runShellCommand(deviceId, ['mkdir', '-p', artifactsDir]);\n\n    this.artifactsDirMap.set(deviceId, artifactsDir);\n\n    return artifactsDir;\n  }\n\n  async clearArtifactsDir(deviceId: string): Promise<void> {\n    const artifactsDir = this.artifactsDirMap.get(deviceId);\n\n    if (!artifactsDir) {\n      // nothing to do here.\n      return;\n    }\n\n    this.artifactsDirMap.delete(deviceId);\n\n    log.debug(\n      `Removing ${artifactsDir} artifacts directory on ${deviceId} device`\n    );\n\n    await this.runShellCommand(deviceId, [\n      'rm', '-rf', artifactsDir,\n    ]);\n  }\n\n  async pushFile(\n    deviceId: string, localPath: string, devicePath: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(`Pushing ${localPath} to ${devicePath} on ${deviceId}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.push(deviceId, localPath, devicePath)\n        .then(function(transfer) {\n          return new Promise((resolve) => {\n            transfer.on('end', resolve);\n          });\n        });\n    });\n  }\n\n  async startFirefoxAPK(\n    deviceId: string, apk: string, deviceProfileDir: string\n  ): Promise<void> {\n    const {adbClient} = this;\n\n    log.debug(\n      `Starting ${apk} with profile ${deviceProfileDir} on ${deviceId}`\n    );\n\n    await wrapADBCall(async () => {\n      await adbClient.startActivity(deviceId, {\n        wait: true,\n        action: 'android.activity.MAIN',\n        component: `${apk}/.App`,\n        extras: [\n          {\n            key: 'args',\n            value: `-profile ${deviceProfileDir}`,\n          },\n        ],\n      });\n    });\n  }\n\n  setUserAbortDiscovery(value: boolean) {\n    this.userAbortDiscovery = value;\n  }\n\n  async discoverRDPUnixSocket(\n    deviceId: string, apk: string,\n    {maxDiscoveryTime, retryInterval}: DiscoveryParams = {}\n  ): Promise<string> {\n    let rdpUnixSockets = [];\n\n    const discoveryStartedAt = Date.now();\n\n    while (rdpUnixSockets.length === 0) {\n      if (this.userAbortDiscovery) {\n        throw new UsageError(\n          'Exiting Firefox Remote Debugging socket discovery on user request'\n        );\n      }\n\n      if (Date.now() - discoveryStartedAt > maxDiscoveryTime) {\n        throw new WebExtError(\n          'Timeout while waiting for the Android Firefox Debugger Socket'\n        );\n      }\n\n      rdpUnixSockets = (await this.runShellCommand(deviceId, [\n        'cat', '/proc/net/unix',\n      ])).split('\\n').filter((line) => {\n        // The RDP unix socket is expected to be a path in the form:\n        //   /data/data/org.mozilla.fennec_rpl/firefox-debugger-socket\n        return line.trim().endsWith(`${apk}/firefox-debugger-socket`);\n      });\n\n      if (rdpUnixSockets.length === 0) {\n        await new Promise((resolve) => setTimeout(resolve, retryInterval));\n      }\n    }\n\n    // Convert into an array of unix socket filenames.\n    rdpUnixSockets = rdpUnixSockets.map((line) => {\n      return line.trim().split(/\\s/).pop();\n    });\n\n    if (rdpUnixSockets.length > 1) {\n      throw new WebExtError(\n        'Unexpected multiple RDP sockets: ' +\n        `${JSON.stringify(rdpUnixSockets)}`\n      );\n    }\n\n    return rdpUnixSockets[0];\n  }\n\n  async setupForward(deviceId: string, remote: string, local: string) {\n    const {adbClient} = this;\n\n    // TODO(rpl): we should use adb.listForwards and reuse the existing one if any (especially\n    // because adbkit doesn't seem to support `adb forward --remote` yet).\n    log.debug(`Configuring ADB forward for ${deviceId}: ${remote} -> ${local}`);\n\n    await wrapADBCall(async () => {\n      await adbClient.forward(deviceId, local, remote);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/adb.js","module.exports = require(\"adbkit\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"adbkit\"\n// module id = 194\n// module chunks = 0","/* @flow */\nimport path from 'path';\n\nimport {fs} from 'mz';\nimport defaultAddonSigner from 'sign-addon';\n\nimport defaultBuilder from './build';\nimport getValidatedManifest, {getManifestId} from '../util/manifest';\nimport {withTempDir} from '../util/temp-dir';\nimport {isErrorWithCode, UsageError, WebExtError} from '../errors';\nimport {prepareArtifactsDir} from '../util/artifacts';\nimport {createLogger} from '../util/logger';\nimport type {ExtensionManifest} from '../util/manifest';\n\n\nconst log = createLogger(__filename);\n\nexport const extensionIdFile = '.web-extension-id';\n\n// Sign command types and implementation.\n\nexport type SignParams = {|\n  apiKey: string,\n  apiProxy: string,\n  apiSecret: string,\n  apiUrlPrefix: string,\n  artifactsDir: string,\n  id?: string,\n  ignoreFiles?: Array<string>,\n  sourceDir: string,\n  timeout: number,\n  verbose?: boolean,\n|};\n\nexport type SignOptions = {\n  build?: typeof defaultBuilder,\n  signAddon?: typeof defaultAddonSigner,\n  preValidatedManifest?: ExtensionManifest,\n  shouldExitProgram?: boolean,\n};\n\nexport type SignResult = {|\n  success: boolean,\n  id: string,\n  downloadedFiles: Array<string>,\n|};\n\nexport default function sign(\n  {\n    apiKey,\n    apiProxy,\n    apiSecret,\n    apiUrlPrefix,\n    artifactsDir,\n    id,\n    ignoreFiles = [],\n    sourceDir,\n    timeout,\n    verbose,\n  }: SignParams,\n  {\n    build = defaultBuilder,\n    preValidatedManifest,\n    signAddon = defaultAddonSigner,\n  }: SignOptions = {}\n): Promise<SignResult> {\n  return withTempDir(\n    async function(tmpDir) {\n      await prepareArtifactsDir(artifactsDir);\n\n      let manifestData;\n\n      if (preValidatedManifest) {\n        manifestData = preValidatedManifest;\n      } else {\n        manifestData = await getValidatedManifest(sourceDir);\n      }\n\n      const [buildResult, idFromSourceDir] = await Promise.all([\n        build({sourceDir, ignoreFiles, artifactsDir: tmpDir.path()},\n              {manifestData, showReadyMessage: false}),\n        getIdFromSourceDir(sourceDir),\n      ]);\n\n      const manifestId = getManifestId(manifestData);\n\n      if (id && manifestId) {\n        throw new UsageError(\n          `Cannot set custom ID ${id} because manifest.json ` +\n          `declares ID ${manifestId}`);\n      }\n      if (id) {\n        log.debug(`Using custom ID declared as --id=${id}`);\n      }\n\n      if (manifestId) {\n        id = manifestId;\n      }\n\n      if (!id && idFromSourceDir) {\n        log.info(\n          `Using previously auto-generated extension ID: ${idFromSourceDir}`);\n        id = idFromSourceDir;\n      }\n\n      if (!id) {\n        log.warn('No extension ID specified (it will be auto-generated)');\n      }\n\n      const signingResult = await signAddon({\n        apiKey,\n        apiSecret,\n        apiUrlPrefix,\n        apiProxy,\n        timeout,\n        verbose,\n        id,\n        xpiPath: buildResult.extensionPath,\n        version: manifestData.version,\n        downloadDir: artifactsDir,\n      });\n\n      if (signingResult.id) {\n        await saveIdToSourceDir(sourceDir, signingResult.id);\n      }\n\n      // All information about the downloaded files would have\n      // already been logged by signAddon().\n      if (signingResult.success) {\n        log.info(`Extension ID: ${signingResult.id}`);\n        log.info('SUCCESS');\n      } else {\n        log.info('FAIL');\n        throw new WebExtError(\n          'The extension could not be signed');\n      }\n\n      return signingResult;\n    }\n  );\n}\n\n\nexport async function getIdFromSourceDir(\n  sourceDir: string\n): Promise<string | void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n\n  let content;\n\n  try {\n    content = await fs.readFile(filePath);\n  } catch (error) {\n    if (isErrorWithCode('ENOENT', error)) {\n      log.debug(`No ID file found at: ${filePath}`);\n      return;\n    }\n    throw error;\n  }\n\n  let lines = content.toString().split('\\n');\n  lines = lines.filter((line) => {\n    line = line.trim();\n    if (line && !line.startsWith('#')) {\n      return line;\n    }\n  });\n\n  const id = lines[0];\n  log.debug(`Found extension ID ${id} in ${filePath}`);\n\n  if (!id) {\n    throw new UsageError(`No ID found in extension ID file ${filePath}`);\n  }\n\n  return id;\n}\n\n\nexport async function saveIdToSourceDir(\n  sourceDir: string, id: string\n): Promise<void> {\n  const filePath = path.join(sourceDir, extensionIdFile);\n  await fs.writeFile(filePath, [\n    '# This file was created by https://github.com/mozilla/web-ext',\n    '# Your auto-generated extension ID for addons.mozilla.org is:',\n    id.toString(),\n  ].join('\\n'));\n\n  log.debug(`Saved auto-generated ID ${id} to ${filePath}`);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/sign.js","module.exports = require(\"sign-addon\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sign-addon\"\n// module id = 196\n// module chunks = 0","/* @flow */\nimport opn from 'opn';\n\nimport {createLogger} from '../util/logger';\n\nconst log = createLogger(__filename);\n\nexport type DocsParams = {\n  noInput?: boolean,\n  shouldExitProgram?: boolean,\n}\n\nexport type DocsOptions = {\n  openUrl?: typeof opn,\n}\n\nexport const url = 'https://developer.mozilla.org/en-US/Add-ons' +\n  '/WebExtensions/Getting_started_with_web-ext';\n\nexport default function docs(\n  params: DocsParams, {openUrl = opn}: DocsOptions = {}\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    openUrl(url, (error) => {\n      if (error) {\n        log.debug(`Encountered an error while opening URL ${url}`, error);\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cmd/docs.js","module.exports = require(\"opn\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"opn\"\n// module id = 198\n// module chunks = 0","/* @flow */\nimport defaultUpdateNotifier from 'update-notifier';\n\ntype CheckForUpdatesParams = {|\n  version: string,\n  updateNotifier?: typeof defaultUpdateNotifier,\n|};\n\nexport function checkForUpdates(\n  {\n    version,\n    updateNotifier = defaultUpdateNotifier,\n  }: CheckForUpdatesParams\n) {\n  const pkg = {name: 'web-ext', version};\n\n  updateNotifier({\n    pkg,\n    updateCheckInterval: 1000 * 60 * 60 * 24 * 3, // 3 days,\n  }).notify();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/updates.js","module.exports = require(\"update-notifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"update-notifier\"\n// module id = 200\n// module chunks = 0","/* @flow */\nimport os from 'os';\nimport path from 'path';\n\nimport requireUncached from 'require-uncached';\nimport camelCase from 'camelcase';\nimport decamelize from 'decamelize';\n\nimport fileExists from './util/file-exists';\nimport {createLogger} from './util/logger';\nimport {UsageError, WebExtError} from './errors';\n\nconst log = createLogger(__filename);\n\ntype ApplyConfigToArgvParams = {|\n  // This is the argv object which will get updated by each\n  // config applied.\n  argv: Object,\n  // This is the argv that only has CLI values applied to it.\n  argvFromCLI: Object,\n  configObject: Object,\n  options: Object,\n  configFileName: string,\n|};\n\nexport function applyConfigToArgv({\n  argv,\n  argvFromCLI,\n  configObject,\n  options,\n  configFileName,\n}: ApplyConfigToArgvParams): Object {\n  let newArgv = {...argv};\n\n  for (const option of Object.keys(configObject)) {\n    if (camelCase(option) !== option) {\n      throw new UsageError(\n        `The config option \"${option}\" must be ` +\n        `specified in camel case: \"${camelCase(option)}\"`);\n    }\n\n    // A config option cannot be a sub-command config\n    // object if it is an array.\n    if (!Array.isArray(configObject[option]) &&\n      typeof options[option] === 'object' &&\n      typeof configObject[option] === 'object') {\n      // Descend into the nested configuration for a sub-command.\n      newArgv = applyConfigToArgv({\n        argv: newArgv,\n        argvFromCLI,\n        configObject: configObject[option],\n        options: options[option],\n        configFileName});\n      continue;\n    }\n\n    const decamelizedOptName = decamelize(option, '-');\n\n    if (typeof options[decamelizedOptName] !== 'object') {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `an unknown option: \"${option}\"`);\n    }\n    if (options[decamelizedOptName].type === undefined) {\n      // This means yargs option type wasn't not defined correctly\n      throw new WebExtError(\n        `Option: ${option} was defined without a type.`);\n    }\n\n    const expectedType = options[decamelizedOptName].type ===\n      'count' ? 'number' : options[decamelizedOptName].type;\n\n    const optionType = (\n      Array.isArray(configObject[option]) ?\n        'array' : typeof configObject[option]\n    );\n\n    if (optionType !== expectedType) {\n      throw new UsageError(`The config file at ${configFileName} specified ` +\n        `the type of \"${option}\" incorrectly as \"${optionType}\"` +\n        ` (expected type \"${expectedType}\")`);\n    }\n\n    let defaultValue;\n    if (options[decamelizedOptName]) {\n      if (options[decamelizedOptName].default !== undefined) {\n        defaultValue = options[decamelizedOptName].default;\n      } else if (expectedType === 'boolean') {\n        defaultValue = false;\n      }\n    }\n\n    // This is our best effort (without patching yargs) to detect\n    // if a value was set on the CLI instead of in the config.\n    // It looks for a default value and if the argv value is\n    // different, it assumes that the value was configured on the CLI.\n\n    const wasValueSetOnCLI =\n      typeof argvFromCLI[option] !== 'undefined' &&\n      argvFromCLI[option] !== defaultValue;\n    if (wasValueSetOnCLI) {\n      log.debug(\n        `Favoring CLI: ${option}=${argvFromCLI[option]} over ` +\n        `configuration: ${option}=${configObject[option]}`);\n      newArgv[option] = argvFromCLI[option];\n      continue;\n    }\n\n    newArgv[option] = configObject[option];\n\n    const coerce = options[decamelizedOptName].coerce;\n    if (coerce) {\n      log.debug(\n        `Calling coerce() on configured value for ${option}`);\n      newArgv[option] = coerce(newArgv[option]);\n    }\n  }\n  return newArgv;\n}\n\nexport function loadJSConfigFile(filePath: string): Object {\n  const resolvedFilePath = path.resolve(filePath);\n  log.debug(\n    `Loading JS config file: \"${filePath}\" ` +\n    `(resolved to \"${resolvedFilePath}\")`);\n  let configObject;\n  try {\n    configObject = requireUncached(resolvedFilePath);\n  } catch (error) {\n    log.debug('Handling error:', error);\n    throw new UsageError(\n      `Cannot read config file: ${resolvedFilePath}\\n` +\n      `Error: ${error.message}`);\n  }\n  if (filePath.endsWith('package.json')) {\n    log.debug('Looking for webExt key inside package.json file');\n    configObject = configObject.webExt || {};\n  }\n  if (Object.keys(configObject).length === 0) {\n    log.debug(`Config file ${resolvedFilePath} did not define any options. ` +\n      'Did you set module.exports = {...}?');\n  }\n  return configObject;\n}\n\ntype DiscoverConfigFilesParams = {|\n  getHomeDir: () => string,\n|};\n\nexport async function discoverConfigFiles(\n  {getHomeDir = os.homedir}: DiscoverConfigFilesParams = {}\n): Promise<Array<string>> {\n  const magicConfigName = 'web-ext-config.js';\n\n  // Config files will be loaded in this order.\n  const possibleConfigs = [\n    // Look for a magic hidden config (preceded by dot) in home dir.\n    path.join(getHomeDir(), `.${magicConfigName}`),\n    // Look for webExt key inside package.json file\n    path.join(process.cwd(), 'package.json'),\n    // Look for a magic config in the current working directory.\n    path.join(process.cwd(), magicConfigName),\n  ];\n\n  const configs = await Promise.all(possibleConfigs.map(\n    async (fileName) => {\n      const resolvedFileName = path.resolve(fileName);\n      if (await fileExists(resolvedFileName)) {\n        return resolvedFileName;\n      } else {\n        log.debug(\n          `Discovered config \"${resolvedFileName}\" does not ` +\n          'exist or is not readable');\n        return undefined;\n      }\n    }\n  ));\n\n  const existingConfigs = [];\n  configs.forEach((f) => {\n    if (typeof f === 'string') {\n      existingConfigs.push(f);\n    }\n  });\n  return existingConfigs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = require(\"require-uncached\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require-uncached\"\n// module id = 202\n// module chunks = 0","module.exports = require(\"decamelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"decamelize\"\n// module id = 203\n// module chunks = 0","/* @flow */\nimport {fs} from 'mz';\n\nimport {isErrorWithCode} from '../errors';\n\ntype FileExistsOptions = {|\n  fileIsReadable: (filePath: string) => Promise<boolean>,\n|};\n\n/*\n * Resolves true if the path is a readable file.\n *\n * Usage:\n *\n * const exists = await fileExists(filePath);\n * if (exists) {\n *   // ...\n * }\n *\n * */\nexport default async function fileExists(\n  path: string,\n  {\n    fileIsReadable = (f) => fs.access(f, fs.constants.R_OK),\n  }: FileExistsOptions = {}\n): Promise<boolean> {\n  try {\n    await fileIsReadable(path);\n    const stat = await fs.stat(path);\n    return stat.isFile();\n  } catch (error) {\n    if (isErrorWithCode(['EACCES', 'ENOENT'], error)) {\n      return false;\n    }\n    throw error;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/file-exists.js"],"sourceRoot":""}